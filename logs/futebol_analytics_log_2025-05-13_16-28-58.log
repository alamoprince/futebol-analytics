2025-05-13 16:28:58 - MainApp - INFO - APP_DIR (launcher): c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src
2025-05-13 16:28:58 - MainApp - INFO - SRC_DIR: c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src
2025-05-13 16:28:58 - MainApp - INFO - BASE_DIR: c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics
2025-05-13 16:28:58 - MainApp - INFO - sys.path includes SRC_DIR?: True, BASE_DIR?: True
2025-05-13 16:29:08 - Config - INFO - Biblioteca 'catboost' carregada.
2025-05-13 16:29:10 - ModelTrainerApp - INFO - Biblioteca 'imbalanced-learn' carregada com sucesso.
2025-05-13 16:29:11 - MainApp - INFO - DPI Awareness set.
2025-05-13 16:29:12 - MainApp - INFO - ScraperUploadTab instanciada.
2025-05-13 16:29:12 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_f1.joblib (Modif.: 2025-05-13 14:53:58)
2025-05-13 16:29:12 - PredictorApp - INFO -   Tipo: GaussianNB | Calib: Sim | F1 Thr: 0.2668 | EV Thr: 0.2500
2025-05-13 16:29:12 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_roi.joblib (Modif.: 2025-05-13 14:53:58)
2025-05-13 16:29:12 - PredictorApp - INFO -   Tipo: SVC | Calib: Sim | F1 Thr: 0.2500 | EV Thr: 0.2500
2025-05-13 16:29:12 - DataHandler - INFO - Iniciando carregamento/mapeamento histórico (FILTRO DE LIGA HISTÓRICO ATIVO por TARGET_LEAGUES_INTERNAL_IDS)...
2025-05-13 16:29:12 - DataHandler - INFO - -- Processando arquivo: dados_combinados_2019_2025.xlsx --
2025-05-13 16:29:12 - DataHandler - INFO - Lendo dados_combinados_2019_2025.xlsx (formato: .xlsx)...
2025-05-13 16:29:54 - DataHandler - INFO -   -> Lido 97670 linhas de dados_combinados_2019_2025.xlsx.
2025-05-13 16:29:54 - DataHandler - INFO - (dados_combinados_2019_2025.xlsx) Mapeando coluna de liga 'League'...
2025-05-13 16:29:54 - DataHandler - WARNING -   (dados_combinados_2019_2025.xlsx) Ligas NÃO mapeadas para ID Interno: ['Austria 2. Liga', 'Austria Bundesliga', 'Belgium Pro League', 'Bulgaria First League', 'Chile Primera División', 'China Chinese Super League', 'Croatia Prva HNL', 'Czech Republic First League', 'Denmark Superliga', 'Egypt Egyptian Premier League', 'England Championship', 'England EFL League One', 'England EFL League Two', 'England Premier League', 'Estonia Meistriliiga', 'Finland Veikkausliiga', 'France Ligue 1', 'France Ligue 2', 'Germany 2. Bundesliga', 'Germany Bundesliga', 'Greece Super League', 'Iceland Úrvalsdeild', 'Japan J1 League', 'Japan J2 League', 'Netherlands Eerste Divisie', 'Netherlands Eredivisie', 'Norway Eliteserien', 'Norway First Division', 'Paraguay Division Profesional', 'Poland Ekstraklasa', 'Portugal Liga NOS', 'Portugal LigaPro', 'Republic of Ireland Premier Division', 'Scotland Premiership', 'Slovakia Super Liga', 'Slovenia PrvaLiga', 'South Korea K League 1', 'South Korea K League 2', 'Spain La Liga', 'Sweden Allsvenskan', 'Sweden Superettan', 'Switzerland Challenge League', 'Switzerland Super League', 'Turkey Süper Lig', 'USA MLS', 'Uruguay Primera División', 'Wales Welsh Premier League']
2025-05-13 16:29:54 - DataHandler - INFO -   (dados_combinados_2019_2025.xlsx) APLICANDO FILTRO por TARGET_LEAGUES_INTERNAL_IDS...
2025-05-13 16:29:54 - DataHandler - INFO -     -> Filtro de Liga: 18177/97670 jogos restantes.
2025-05-13 16:29:54 - DataHandler - INFO -   -> Arquivo dados_combinados_2019_2025.xlsx processado com sucesso (Shape: (18177, 20)).
2025-05-13 16:29:54 - DataHandler - INFO - Concatenando 1 DataFrames processados...
2025-05-13 16:29:54 - DataHandler - INFO - DataFrame histórico combinado antes do pós-processamento: (18177, 20)
2025-05-13 16:29:54 - DataHandler - INFO - Iniciando processamento comum pós-concatenação...
2025-05-13 16:29:55 - DataHandler - INFO -   -> Conversão de 'Date' concluída. 0 NaNs restantes em Date (deveria ser 0).
2025-05-13 16:29:55 - DataHandler - INFO -   Verificando NaNs essenciais em: ['Date', 'Home', 'Away', 'Goals_H_FT', 'Goals_A_FT', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-13 16:29:55 - DataHandler - INFO -   Removidas 239 linhas devido a NaNs em colunas essenciais.
2025-05-13 16:29:55 - DataHandler - INFO -   DataFrame histórico ordenado por data.
2025-05-13 16:29:55 - DataHandler - INFO -   Calculando Pi-Ratings finais...
2025-05-13 16:29:55 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-13 16:29:56 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-13 16:29:56 - DataHandler - INFO - Processamento pós-concatenação concluído.
2025-05-13 16:29:56 - DataHandler - INFO - Carregamento e processamento de dados históricos concluídos (FILTRO DE LIGA HISTÓRICO ATIVO por TARGET_LEAGUES_INTERNAL_IDS). Shape Final: (17938, 27)
2025-05-13 16:29:56 - DataHandler - INFO - Contagem de NaNs finais (em colunas com algum NaN):
Odd_Over25_FT      156
Odd_Under25_FT     156
Odd_BTTS_Yes       154
Odd_BTTS_No        154
PiR_Mom_5G_H       591
PiR_Mom_5G_A       616
PiR_Mom_5G_Diff    793
dtype: int64
2025-05-13 16:29:56 - MainApp - INFO - FootballPredictorDashboard instanciada.
2025-05-13 16:29:56 - MainApp - INFO - FeatureAnalyzerApp instanciada.
2025-05-13 16:29:56 - MainApp - INFO - ModelInterpreterApp instanciada.
2025-05-13 16:33:10 - DataHandler - INFO - Iniciando carregamento/mapeamento histórico (FILTRO DE LIGA HISTÓRICO ATIVO por TARGET_LEAGUES_INTERNAL_IDS)...
2025-05-13 16:33:10 - DataHandler - INFO - -- Processando arquivo: dados_combinados_2019_2025.xlsx --
2025-05-13 16:33:10 - DataHandler - INFO - Lendo dados_combinados_2019_2025.xlsx (formato: .xlsx)...
2025-05-13 16:33:52 - DataHandler - INFO -   -> Lido 97670 linhas de dados_combinados_2019_2025.xlsx.
2025-05-13 16:33:52 - DataHandler - INFO - (dados_combinados_2019_2025.xlsx) Mapeando coluna de liga 'League'...
2025-05-13 16:33:52 - DataHandler - WARNING -   (dados_combinados_2019_2025.xlsx) Ligas NÃO mapeadas para ID Interno: ['Austria 2. Liga', 'Austria Bundesliga', 'Belgium Pro League', 'Bulgaria First League', 'Chile Primera División', 'China Chinese Super League', 'Croatia Prva HNL', 'Czech Republic First League', 'Denmark Superliga', 'Egypt Egyptian Premier League', 'England Championship', 'England EFL League One', 'England EFL League Two', 'England Premier League', 'Estonia Meistriliiga', 'Finland Veikkausliiga', 'France Ligue 1', 'France Ligue 2', 'Germany 2. Bundesliga', 'Germany Bundesliga', 'Greece Super League', 'Iceland Úrvalsdeild', 'Japan J1 League', 'Japan J2 League', 'Netherlands Eerste Divisie', 'Netherlands Eredivisie', 'Norway Eliteserien', 'Norway First Division', 'Paraguay Division Profesional', 'Poland Ekstraklasa', 'Portugal Liga NOS', 'Portugal LigaPro', 'Republic of Ireland Premier Division', 'Scotland Premiership', 'Slovakia Super Liga', 'Slovenia PrvaLiga', 'South Korea K League 1', 'South Korea K League 2', 'Spain La Liga', 'Sweden Allsvenskan', 'Sweden Superettan', 'Switzerland Challenge League', 'Switzerland Super League', 'Turkey Süper Lig', 'USA MLS', 'Uruguay Primera División', 'Wales Welsh Premier League']
2025-05-13 16:33:52 - DataHandler - INFO -   (dados_combinados_2019_2025.xlsx) APLICANDO FILTRO por TARGET_LEAGUES_INTERNAL_IDS...
2025-05-13 16:33:52 - DataHandler - INFO -     -> Filtro de Liga: 18177/97670 jogos restantes.
2025-05-13 16:33:52 - DataHandler - INFO -   -> Arquivo dados_combinados_2019_2025.xlsx processado com sucesso (Shape: (18177, 20)).
2025-05-13 16:33:52 - DataHandler - INFO - Concatenando 1 DataFrames processados...
2025-05-13 16:33:52 - DataHandler - INFO - DataFrame histórico combinado antes do pós-processamento: (18177, 20)
2025-05-13 16:33:52 - DataHandler - INFO - Iniciando processamento comum pós-concatenação...
2025-05-13 16:33:52 - DataHandler - INFO -   -> Conversão de 'Date' concluída. 0 NaNs restantes em Date (deveria ser 0).
2025-05-13 16:33:52 - DataHandler - INFO -   Verificando NaNs essenciais em: ['Date', 'Home', 'Away', 'Goals_H_FT', 'Goals_A_FT', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-13 16:33:52 - DataHandler - INFO -   Removidas 239 linhas devido a NaNs em colunas essenciais.
2025-05-13 16:33:52 - DataHandler - INFO -   DataFrame histórico ordenado por data.
2025-05-13 16:33:52 - DataHandler - INFO -   Calculando Pi-Ratings finais...
2025-05-13 16:33:52 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-13 16:33:53 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-13 16:33:53 - DataHandler - INFO - Processamento pós-concatenação concluído.
2025-05-13 16:33:53 - DataHandler - INFO - Carregamento e processamento de dados históricos concluídos (FILTRO DE LIGA HISTÓRICO ATIVO por TARGET_LEAGUES_INTERNAL_IDS). Shape Final: (17938, 27)
2025-05-13 16:33:53 - DataHandler - INFO - Contagem de NaNs finais (em colunas com algum NaN):
Odd_Over25_FT      156
Odd_Under25_FT     156
Odd_BTTS_Yes       154
Odd_BTTS_No        154
PiR_Mom_5G_H       591
PiR_Mom_5G_A       616
PiR_Mom_5G_Diff    793
dtype: int64
2025-05-13 16:33:53 - DataHandler - INFO - --- Iniciando Pipeline Pré-proc e Feature Eng (Histórico) ---
2025-05-13 16:33:53 - DataHandler - INFO - Médias Liga (FA/FD, Poisson): Casa=1.353, Fora=1.045
2025-05-13 16:33:53 - DataHandler - INFO - === ETAPA 1: Intermediárias e Probs ===
2025-05-13 16:33:53 - DataHandler - INFO - Calculando stats intermediárias (Result, IsDraw, Ptos)...
2025-05-13 16:33:53 - DataHandler - INFO - -> Colunas de Gols encontradas: 'Goals_H_FT' e 'Goals_A_FT'.
2025-05-13 16:33:53 - DataHandler - INFO - ->Result/IsDraw/Ptos OK.
2025-05-13 16:33:53 - DataHandler - INFO - Cálculo Intermediárias (Result/IsDraw/Ptos) concluído.
2025-05-13 16:33:53 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-13 16:33:53 - DataHandler - INFO - Probabilidades Normalizadas (p_X_norm, abs_ProbDiff_Norm) calculadas.
2025-05-13 16:33:53 - DataHandler - INFO - === ETAPA 1.5: VG_raw e CG_raw ===
2025-05-13 16:33:53 - DataHandler - INFO - Calculando VG_raw e CG_raw...
2025-05-13 16:33:53 - DataHandler - INFO - -> VG_raw e CG_raw calculados.
2025-05-13 16:33:53 - DataHandler - INFO - === ETAPA 2: PiRatings ===
2025-05-13 16:33:53 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-13 16:33:55 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-13 16:33:55 - DataHandler - INFO - === ETAPA 3: Rolling Stats ===
2025-05-13 16:33:55 - DataHandler - INFO - Calculando 8 métricas rolling (Janela Padrão=5)...
2025-05-13 16:34:07 - DataHandler - INFO - Métricas rolling calculadas. Shape: (17938, 16).
2025-05-13 16:34:07 - DataHandler - INFO - === ETAPA 4: EWMA Stats ===
2025-05-13 16:34:07 - DataHandler - INFO - Calculando 4 métricas EWMA (Span Padrão=5)...
2025-05-13 16:34:35 - DataHandler - INFO - Métricas EWMA calculadas. Shape: (17938, 8).
2025-05-13 16:34:35 - DataHandler - INFO - === ETAPA 5: FA/FD ===
2025-05-13 16:34:35 - DataHandler - INFO - === ETAPA 6: Poisson, Binned, Derivadas ===
2025-05-13 16:34:35 - DataHandler - INFO - Calculando Prob Empate (Poisson Refinado, max_goals=6)...
2025-05-13 16:34:35 - DataHandler - INFO - Prob_Empate_Poisson (Refinado) calculado.
2025-05-13 16:34:35 - DataHandler - INFO - Binning ('Odd_D_Cat') calculado a partir de 'Odd_D_FT'.
2025-05-13 16:34:35 - DataHandler - INFO - Calculando features derivadas (CV_HDA, Diff_Media_CG, Novas Interações)...
2025-05-13 16:34:35 - DataHandler - INFO - Features de interação calculadas (incluindo novas).
2025-05-13 16:34:35 - DataHandler - INFO - === FIM PIPELINE FEATURE ENG (HISTÓRICO) ===
2025-05-13 16:34:35 - DataHandler - INFO - --- Selecionando e Limpando Features Finais ---
2025-05-13 16:34:35 - DataHandler - INFO - Features finais a serem usadas para o modelo: ['Prob_Empate_Poisson', 'abs_ProbDiff_Norm', 'Odd_Over25_FT', 'CV_HDA', 'Media_CG_H', 'Media_VG_A']
2025-05-13 16:34:35 - DataHandler - INFO - DataFrame selecionado com features e alvo (antes do dropna): (17938, 7)
2025-05-13 16:34:35 - DataHandler - WARNING - NaNs ANTES do dropna final nas features selecionadas:
Odd_Over25_FT    156
Media_CG_H       178
Media_VG_A       135
dtype: int64
2025-05-13 16:34:35 - DataHandler - INFO - Removidas 389 linhas contendo NaNs/Infs nas features finais ou no alvo.
2025-05-13 16:34:35 - DataHandler - INFO - --- Seleção e Limpeza de Features Finais Concluída --- Shape X: (17549, 6), Shape y: (17549,).
2025-05-13 16:34:35 - DataHandler - INFO - Calculando stats intermediárias (Result, IsDraw, Ptos)...
2025-05-13 16:34:35 - DataHandler - INFO - -> Colunas de Gols encontradas: 'Goals_H_FT' e 'Goals_A_FT'.
2025-05-13 16:34:35 - DataHandler - INFO - ->Result/IsDraw/Ptos OK.
2025-05-13 16:34:35 - DataHandler - INFO - Cálculo Intermediárias (Result/IsDraw/Ptos) concluído.
2025-05-13 16:34:35 - Main2 - INFO - DEBUG Main: df_full_data_aligned_for_split (17549, 31)
2025-05-13 16:34:35 - ModelTrainerApp - INFO - --- Iniciando Treinamento Otimizado para 7 Modelos Individuais ---
2025-05-13 16:34:35 - ModelTrainerApp - INFO - Dividindo dados temporalmente (Treino+CV / Teste Final)...
2025-05-13 16:34:35 - ModelTrainerApp - INFO - Split Temporal: T+CV=14040 (80.0%), Teste=3509 (20.0%)
2025-05-13 16:34:35 - ModelTrainerApp - INFO - Odds alinhadas com o conjunto de teste: 3509 jogos.
2025-05-13 16:34:35 - ModelTrainerApp - INFO - 
--- Mod 1/7 (RandomForestClassifier): Iniciando ---
2025-05-13 16:34:35 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: RandomForestClassifier)
2025-05-13 16:34:35 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV para RandomForestClassifier (Score: f1, CV: Temporal)...
2025-05-13 16:40:19 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4270. Params: {'bootstrap': True, 'class_weight': 'balanced_subsample', 'max_depth': 5, 'max_features': 'log2', 'min_samples_leaf': 3, 'min_samples_split': 5, 'n_estimators': 50}
2025-05-13 16:40:19 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para RandomForestClassifier em todos os dados de treino+CV...
2025-05-13 16:40:19 - ModelTrainerApp - INFO -   -> Treino final do pipeline para RandomForestClassifier OK.
2025-05-13 16:40:19 - ModelTrainerApp - WARNING - Mod 1/7 (RandomForestClassifier) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 16:40:19 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para RandomForestClassifier...
2025-05-13 16:40:19 - ModelTrainerApp - INFO -   -> Calibrador treinado para RandomForestClassifier.
2025-05-13 16:40:19 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2566 (F1=0.4673)
2025-05-13 16:40:19 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.200 (ROI=46.15%)
2025-05-13 16:40:19 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3305 (P=0.3380, R=0.2744)
2025-05-13 16:40:19 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (RandomForestClassifier) no Teste...
2025-05-13 16:40:20 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4447, P=0.3285, R=0.6883
2025-05-13 16:40:20 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2566): F1=0.4673, P=0.3176, R=0.8834
2025-05-13 16:40:20 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3305): F1=0.3029, P=0.3380, R=0.2744
2025-05-13 16:40:20 - ModelTrainerApp - INFO -     AUC(Calib)=0.5568, Brier(Calib)=0.2072, LogLoss(Raw)=0.6860
2025-05-13 16:40:20 - ModelTrainerApp - INFO -     ROI @EVOpt(0.200) = 46.15% (48 bets)
2025-05-13 16:40:20 - ModelTrainerApp - INFO - Mod 1/7 (RandomForestClassifier) Concluído. Tempo: 344.44s
2025-05-13 16:40:20 - ModelTrainerApp - INFO - 
--- Mod 2/7 (LogisticRegression): Iniciando ---
2025-05-13 16:40:20 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: LogisticRegression)
2025-05-13 16:40:20 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-13 16:40:20 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-13 16:40:20 - ModelTrainerApp - INFO - Mod 2/7 (LogisticRegression) Scaling OK.
2025-05-13 16:40:20 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV para LogisticRegression (Score: f1, CV: Temporal)...
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4246. Params: {'C': 0.012369506979664635, 'class_weight': None, 'max_iter': 7000, 'penalty': 'l1', 'solver': 'liblinear'}
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para LogisticRegression em todos os dados de treino+CV...
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   -> Treino final do pipeline para LogisticRegression OK.
2025-05-13 16:41:24 - ModelTrainerApp - WARNING - Mod 2/7 (LogisticRegression) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para LogisticRegression...
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   -> Calibrador treinado para LogisticRegression.
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2674 (F1=0.4717)
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.230 (ROI=27.65%)
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3115 (P=0.3412, R=0.4685)
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (LogisticRegression) no Teste...
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4344, P=0.3325, R=0.6262
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2674): F1=0.4717, P=0.3308, R=0.8222
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3115): F1=0.3948, P=0.3412, R=0.4685
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     AUC(Calib)=0.5626, Brier(Calib)=0.2070, LogLoss(Raw)=0.6922
2025-05-13 16:41:24 - ModelTrainerApp - INFO -     ROI @EVOpt(0.230) = 27.65% (57 bets)
2025-05-13 16:41:24 - ModelTrainerApp - INFO - Mod 2/7 (LogisticRegression) Concluído. Tempo: 64.38s
2025-05-13 16:41:24 - ModelTrainerApp - INFO - 
--- Mod 3/7 (LGBMClassifier): Iniciando ---
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: LGBMClassifier)
2025-05-13 16:41:24 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV para LGBMClassifier (Score: f1, CV: Temporal)...
2025-05-13 16:49:21 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4285. Params: {'boosting_type': 'gbdt', 'colsample_bytree': 0.9, 'learning_rate': 0.005, 'max_depth': 3, 'n_estimators': 100, 'num_leaves': 10, 'reg_alpha': 0.001, 'reg_lambda': 4.999999999999999, 'subsample': 0.9}
2025-05-13 16:49:21 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para LGBMClassifier em todos os dados de treino+CV...
2025-05-13 16:49:21 - ModelTrainerApp - INFO -   -> Treino final do pipeline para LGBMClassifier OK.
2025-05-13 16:49:21 - ModelTrainerApp - WARNING - Mod 3/7 (LGBMClassifier) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 16:49:21 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para LGBMClassifier...
2025-05-13 16:49:21 - ModelTrainerApp - INFO -   -> Calibrador treinado para LGBMClassifier.
2025-05-13 16:49:21 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2002 (F1=0.4639)
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.240 (ROI=41.37%)
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3299 (P=0.3502, R=0.2581)
2025-05-13 16:49:22 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (LGBMClassifier) no Teste...
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4452, P=0.3213, R=0.7247
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2002): F1=0.4639, P=0.3036, R=0.9828
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3299): F1=0.2972, P=0.3502, R=0.2581
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     AUC(Calib)=0.5474, Brier(Calib)=0.2079, LogLoss(Raw)=0.6897
2025-05-13 16:49:22 - ModelTrainerApp - INFO -     ROI @EVOpt(0.240) = 41.37% (67 bets)
2025-05-13 16:49:22 - ModelTrainerApp - INFO - Mod 3/7 (LGBMClassifier) Concluído. Tempo: 477.80s
2025-05-13 16:49:22 - ModelTrainerApp - INFO - 
--- Mod 4/7 (SVC): Iniciando ---
2025-05-13 16:49:22 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: SVC)
2025-05-13 16:49:22 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-13 16:49:22 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-13 16:49:22 - ModelTrainerApp - INFO - Mod 4/7 (SVC) Scaling OK.
2025-05-13 16:49:22 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV para SVC (Score: f1, CV: Temporal)...
2025-05-13 18:32:59 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4526. Params: {'C': 0.01, 'class_weight': None, 'gamma': 0.014967954134287555, 'kernel': 'rbf'}
2025-05-13 18:32:59 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para SVC em todos os dados de treino+CV...
2025-05-13 18:34:17 - ModelTrainerApp - INFO -   -> Treino final do pipeline para SVC OK.
2025-05-13 18:34:22 - ModelTrainerApp - WARNING - Mod 4/7 (SVC) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 18:34:22 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para SVC...
2025-05-13 18:34:22 - ModelTrainerApp - INFO -   -> Calibrador treinado para SVC.
2025-05-13 18:34:22 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2538 (F1=0.4698)
2025-05-13 18:34:22 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.250 (ROI=40.67%)
2025-05-13 18:34:22 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3252 (P=0.3438, R=0.4207)
2025-05-13 18:34:22 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (SVC) no Teste...
2025-05-13 18:34:27 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4630, P=0.3241, R=0.8098
2025-05-13 18:34:27 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2538): F1=0.4698, P=0.3234, R=0.8585
2025-05-13 18:34:27 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3252): F1=0.3783, P=0.3438, R=0.4207
2025-05-13 18:34:27 - ModelTrainerApp - INFO -     AUC(Calib)=0.5641, Brier(Calib)=0.2067, LogLoss(Raw)=0.6865
2025-05-13 18:34:27 - ModelTrainerApp - INFO -     ROI @EVOpt(0.250) = 40.67% (46 bets)
2025-05-13 18:34:27 - ModelTrainerApp - INFO - Mod 4/7 (SVC) Concluído. Tempo: 6304.83s
2025-05-13 18:34:27 - ModelTrainerApp - INFO - 
--- Mod 5/7 (KNeighborsClassifier): Iniciando ---
2025-05-13 18:34:27 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: KNeighborsClassifier)
2025-05-13 18:34:27 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-13 18:34:27 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-13 18:34:27 - ModelTrainerApp - INFO - Mod 5/7 (KNeighborsClassifier) Scaling OK.
2025-05-13 18:34:27 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV para KNeighborsClassifier (Score: f1, CV: Temporal)...
2025-05-13 18:35:23 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4106. Params: {'metric': 'manhattan', 'n_neighbors': 81, 'p': 3, 'weights': 'uniform'}
2025-05-13 18:35:23 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para KNeighborsClassifier em todos os dados de treino+CV...
2025-05-13 18:35:23 - ModelTrainerApp - INFO -   -> Treino final do pipeline para KNeighborsClassifier OK.
2025-05-13 18:35:23 - ModelTrainerApp - WARNING - Mod 5/7 (KNeighborsClassifier) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 18:35:23 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para KNeighborsClassifier...
2025-05-13 18:35:23 - ModelTrainerApp - INFO -   -> Calibrador treinado para KNeighborsClassifier.
2025-05-13 18:35:23 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2172 (F1=0.4609)
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.220 (ROI=2.45%)
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3216 (P=0.3419, R=0.2935)
2025-05-13 18:35:24 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (KNeighborsClassifier) no Teste...
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4112, P=0.3199, R=0.5755
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2172): F1=0.4609, P=0.2999, R=0.9952
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3216): F1=0.3158, P=0.3419, R=0.2935
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     AUC(Calib)=0.5442, Brier(Calib)=0.2082, LogLoss(Raw)=0.7062
2025-05-13 18:35:24 - ModelTrainerApp - INFO -     ROI @EVOpt(0.220) = 2.45% (233 bets)
2025-05-13 18:35:24 - ModelTrainerApp - INFO - Mod 5/7 (KNeighborsClassifier) Concluído. Tempo: 57.41s
2025-05-13 18:35:24 - ModelTrainerApp - INFO - 
--- Mod 6/7 (CatBoostClassifier): Iniciando ---
2025-05-13 18:35:24 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: CatBoostClassifier)
2025-05-13 18:35:24 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV para CatBoostClassifier (Score: f1, CV: Temporal)...
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4336. Params: {'boosting_type': 'Plain', 'border_count': 32, 'depth': 4, 'iterations': 100, 'l2_leaf_reg': 20.0, 'learning_rate': 0.011196855457413519, 'subsample': 0.5}
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para CatBoostClassifier em todos os dados de treino+CV...
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   -> Treino final do pipeline para CatBoostClassifier OK.
2025-05-13 18:59:53 - ModelTrainerApp - WARNING - Mod 6/7 (CatBoostClassifier) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para CatBoostClassifier...
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   -> Calibrador treinado para CatBoostClassifier.
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2476 (F1=0.4689)
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.200 (ROI=54.47%)
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3366 (P=0.3441, R=0.2553)
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (CatBoostClassifier) no Teste...
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4531, P=0.3294, R=0.7256
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2476): F1=0.4689, P=0.3173, R=0.8977
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3366): F1=0.2931, P=0.3441, R=0.2553
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     AUC(Calib)=0.5592, Brier(Calib)=0.2069, LogLoss(Raw)=0.6877
2025-05-13 18:59:53 - ModelTrainerApp - INFO -     ROI @EVOpt(0.200) = 54.47% (43 bets)
2025-05-13 18:59:53 - ModelTrainerApp - INFO - Mod 6/7 (CatBoostClassifier) Concluído. Tempo: 1469.20s
2025-05-13 18:59:53 - ModelTrainerApp - INFO - 
--- Mod 7/7 (GaussianNB): Iniciando ---
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   Pipeline base criado (Sampler: SMOTE, Classifier: GaussianNB)
2025-05-13 18:59:53 - ModelTrainerApp - INFO -   Iniciando GridSearchCV para GaussianNB (Score: f1, CV: Temporal)...
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     -> Busca CV (GridSearchCV) OK. Melhor CV f1: 0.4459. Params: {'var_smoothing': np.float64(0.0695192796177562)}
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline (da CV) para GaussianNB em todos os dados de treino+CV...
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   -> Treino final do pipeline para GaussianNB OK.
2025-05-13 18:59:54 - ModelTrainerApp - WARNING - Mod 7/7 (GaussianNB) AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE (avaliação otimista).
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para GaussianNB...
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   -> Calibrador treinado para GaussianNB.
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2525 (F1=0.4678)
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.250 (ROI=61.49%)
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3067 (P=0.3421, R=0.6501)
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (GaussianNB) no Teste...
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4583, P=0.3248, R=0.7782
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2525): F1=0.4678, P=0.3182, R=0.8834
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3067): F1=0.4483, P=0.3421, R=0.6501
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     AUC(Calib)=0.5594, Brier(Calib)=0.2069, LogLoss(Raw)=0.7487
2025-05-13 18:59:54 - ModelTrainerApp - INFO -     ROI @EVOpt(0.250) = 61.49% (39 bets)
2025-05-13 18:59:54 - ModelTrainerApp - INFO - Mod 7/7 (GaussianNB) Concluído. Tempo: 0.99s
2025-05-13 18:59:54 - ModelTrainerApp - INFO - 
--- Construindo Ensemble com Top 3 Modelos ---
2025-05-13 18:59:54 - ModelTrainerApp - INFO - Ensemble: Pelo menos um modelo base requer scaling. Aplicando scaling aos dados para o ensemble.
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-13 18:59:54 - ModelTrainerApp - INFO -   Ajustando o wrapper VotingClassifier...
2025-05-13 19:01:15 - ModelTrainerApp - INFO -   -> Wrapper VotingClassifier ajustado.
2025-05-13 19:01:20 - ModelTrainerApp - WARNING - Ensemble: AVISO: Calibração e Otim. Limiares no CONJUNTO DE TESTE.
2025-05-13 19:01:20 - ModelTrainerApp - INFO -   Calibrando probs (sigmoid) para VotingEnsemble...
2025-05-13 19:01:20 - ModelTrainerApp - INFO -   -> Calibrador treinado para VotingEnsemble.
2025-05-13 19:01:20 - ModelTrainerApp - INFO -     Limiar F1 (Calibradas): 0.2608 (F1=0.4696)
2025-05-13 19:01:20 - ModelTrainerApp - INFO -     Limiar EV (Calibradas): 0.250 (ROI=56.24%)
2025-05-13 19:01:20 - ModelTrainerApp - INFO -     Limiar Prec (Calibradas): 0.3203 (P=0.3385, R=0.4388)
2025-05-13 19:01:20 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL (VotingEnsemble) no Teste...
2025-05-13 19:01:25 - ModelTrainerApp - INFO -     Métricas @0.5: F1=0.4448, P=0.3358, R=0.6587
2025-05-13 19:01:25 - ModelTrainerApp - INFO -     Métricas @F1Opt(0.2608): F1=0.4696, P=0.3250, R=0.8461
2025-05-13 19:01:25 - ModelTrainerApp - INFO -     Métricas @PrecOpt(0.3203): F1=0.3822, P=0.3385, R=0.4388
2025-05-13 19:01:25 - ModelTrainerApp - INFO -     AUC(Calib)=0.5620, Brier(Calib)=0.2068, LogLoss(Raw)=0.6880
2025-05-13 19:01:25 - ModelTrainerApp - INFO -     ROI @EVOpt(0.250) = 56.24% (37 bets)
2025-05-13 19:01:25 - ModelTrainerApp - INFO -   -> Ensemble avaliado e adicionado aos resultados.
2025-05-13 19:01:25 - ModelTrainerApp - INFO - --- Treinamento Global Concluído (8809.74 seg) ---
2025-05-13 19:01:25 - ModelTrainerApp - INFO - --- Comparativo Desempenho Modelos (Métrica Principal Teste) ---
2025-05-13 19:01:25 - ModelTrainerApp - INFO - 
            model_name  f1_score_draw_metric roi_metric
    LogisticRegression                0.4717     27.65%
                   SVC                0.4698     40.67%
        VotingEnsemble                0.4696     56.24%
    CatBoostClassifier                0.4689     54.47%
            GaussianNB                0.4678     61.49%
RandomForestClassifier                0.4673     46.15%
        LGBMClassifier                0.4639     41.37%
  KNeighborsClassifier                0.4609      2.45%
2025-05-13 19:01:25 - ModelTrainerApp - INFO - --------------------------------------------------------------------------------
2025-05-13 19:01:25 - ModelTrainerApp - INFO - Salvando Melhor por F1: LogisticRegression
2025-05-13 19:01:25 - ModelTrainerApp - INFO -   -> Objeto salvo: 'LogisticRegression' em best_model_backdraw_best_f1.joblib.
2025-05-13 19:01:25 - ModelTrainerApp - INFO - Salvando para Slot Melhor ROI/2nd F1: GaussianNB
2025-05-13 19:01:25 - ModelTrainerApp - INFO -   -> Objeto salvo: 'GaussianNB' em best_model_backdraw_best_roi.joblib.
2025-05-13 19:01:25 - ModelTrainerApp - INFO - --- Processo de Treinamento Global Concluído com Sucesso ---
2025-05-13 19:01:25 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_f1.joblib (Modif.: 2025-05-13 19:01:25)
2025-05-13 19:01:25 - PredictorApp - INFO -   Tipo: LogisticRegression | Calib: Sim | F1 Thr: 0.2674 | EV Thr: 0.2300
2025-05-13 19:01:25 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_roi.joblib (Modif.: 2025-05-13 19:01:25)
2025-05-13 19:01:25 - PredictorApp - INFO -   Tipo: GaussianNB | Calib: Sim | F1 Thr: 0.2525 | EV Thr: 0.2500
2025-05-13 19:06:05 - DataHandler - INFO - Buscando jogos de today (2025-05-13): https://raw.githubusercontent.com/alamoprince/data_base_fut_analytics/main/data/raw_scraped/scraped_fixtures_2025-05-13.csv
2025-05-13 19:06:05 - DataHandler - ERROR - Erro HTTP ao buscar arquivo futuro: 429 Client Error: Too Many Requests for url: https://raw.githubusercontent.com/alamoprince/data_base_fut_analytics/main/data/raw_scraped/scraped_fixtures_2025-05-13.csv
2025-05-13 19:06:05 - Main2 - ERROR - Erro completo no pipeline de previsão: Falha buscar CSV.
Traceback (most recent call last):
  File "c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src\main.py", line 717, in _run_prediction_pipeline
    raise ValueError("Falha buscar CSV.")
ValueError: Falha buscar CSV.
2025-05-13 19:06:29 - DataHandler - INFO - Buscando jogos de today (2025-05-13): https://raw.githubusercontent.com/alamoprince/data_base_fut_analytics/main/data/raw_scraped/scraped_fixtures_2025-05-13.csv
2025-05-13 19:06:30 - DataHandler - INFO - Arquivo futuro encontrado. Tentando ler...
2025-05-13 19:06:30 - DataHandler - INFO - Lido com sucesso como CSV.
2025-05-13 19:06:30 - DataHandler - INFO - Arquivo futuro baixado e lido. Shape: (86, 15)
2025-05-13 19:06:30 - DataHandler - INFO - Processando arquivo de jogos futuros...
2025-05-13 19:06:30 - DataHandler - INFO - Filtro de liga DESATIVADO para arquivo de jogos futuros.
2025-05-13 19:06:30 - DataHandler - INFO - Processamento jogos futuros OK. Shape final: (86, 14)
2025-05-13 19:06:30 - DataHandler - INFO - Verificando NaNs essenciais (Futuro): ['League', 'Time_Str', 'Home', 'Away', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-13 19:06:30 - DataHandler - INFO - Futuro: Removidas 12 linhas com NaNs essenciais.
2025-05-13 19:06:30 - DataHandler - INFO - Processamento jogos futuros OK. Shape final: (74, 14)
2025-05-13 19:06:30 - DataHandler - INFO - --- Iniciando Preparação de Features para Jogos Futuros ---
2025-05-13 19:06:30 - DataHandler - INFO - Usando Médias da Liga (Histórico): Casa=1.353, Fora=1.045
2025-05-13 19:06:30 - DataHandler - INFO - ETAPA 2: Identificando Configs de Stats Rolling/EWMA Necessárias...
2025-05-13 19:06:30 - DataHandler - WARNING - Rolling Config 'Media_VG' ignorada para futuro: colunas base ausentes no histórico (VG_H_raw, VG_A_raw).
2025-05-13 19:06:30 - DataHandler - WARNING - Rolling Config 'Media_CG' ignorada para futuro: colunas base ausentes no histórico (CG_H_raw, CG_A_raw).
2025-05-13 19:06:30 - DataHandler - INFO - Configs rolling necessárias para futuro: ['Media_GolsMarcados', 'Media_GolsSofridos']
2025-05-13 19:06:30 - DataHandler - INFO - Configs EWMA necessárias para futuro: ['EWMA_GolsMarc', 'EWMA_GolsSofr']
2025-05-13 19:06:30 - DataHandler - INFO - Construindo estado final histórico...
2025-05-13 19:06:31 - DataHandler - INFO - Estado histórico final construído para 242 times.
2025-05-13 19:06:31 - DataHandler - INFO - ETAPA 4: Calculando features rolling/EWMA para jogos futuros...
2025-05-13 19:06:31 - DataHandler - INFO - Features Rolling/EWMA adicionadas/atualizadas. Shape atual: (74, 22)
2025-05-13 19:06:31 - DataHandler - INFO - ETAPA 5: Calculando Pi-Ratings atuais...
2025-05-13 19:06:32 - DataHandler - INFO - ETAPA 6: Calculando features restantes (Probs, FA/FD, Poisson, Binned, Derivadas)...
2025-05-13 19:06:32 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-13 19:06:32 - DataHandler - INFO - Probabilidades Normalizadas (p_X_norm, abs_ProbDiff_Norm) calculadas.
2025-05-13 19:06:32 - DataHandler - INFO - Binning ('Odd_D_Cat') calculado a partir de 'Odd_D_FT'.
2025-05-13 19:06:32 - DataHandler - INFO - Calculando Prob Empate (Poisson Refinado, max_goals=6)...
2025-05-13 19:06:32 - DataHandler - INFO - Prob_Empate_Poisson (Refinado) calculado.
2025-05-13 19:06:32 - DataHandler - INFO - Calculando features derivadas (CV_HDA, Diff_Media_CG, Novas Interações)...
2025-05-13 19:06:32 - DataHandler - WARNING - Médias CG ausentes p/ Diff_Media_CG.
2025-05-13 19:06:32 - DataHandler - INFO - Features de interação calculadas (incluindo novas).
2025-05-13 19:06:32 - DataHandler - INFO - ETAPA 7: Selecionando features FINAIS (['Prob_Empate_Poisson', 'abs_ProbDiff_Norm', 'Odd_Over25_FT', 'CV_HDA', 'Media_CG_H', 'Media_VG_A']) para predição...
2025-05-13 19:06:32 - DataHandler - WARNING - Feature esperada pelo modelo 'Media_CG_H' ausente no DF de fixtures processado. Preenchendo com 0.
2025-05-13 19:06:32 - DataHandler - WARNING - Feature esperada pelo modelo 'Media_VG_A' ausente no DF de fixtures processado. Preenchendo com 0.
2025-05-13 19:06:32 - DataHandler - INFO - Shape X_fix_prep_final (antes da limpeza final): (74, 6)
2025-05-13 19:06:32 - DataHandler - WARNING - 4 NaNs restantes nas features de predição. Preenchendo com 0.
2025-05-13 19:06:32 - DataHandler - INFO - --- Preparação de Features para Jogos Futuros Concluída. Shape Final Retornado: (74, 6) ---
2025-05-13 19:06:32 - PredictorApp - INFO - Realizando previsões (Pipeline) para 74 jogos...
2025-05-13 19:06:32 - PredictorApp - INFO -   Aplicando scaler...
2025-05-13 19:06:32 - PredictorApp - INFO -   Calculando probs brutas...
2025-05-13 19:06:32 - PredictorApp - INFO -   Aplicando calibrador na coluna 'ProbRaw_Empate'...
2025-05-13 19:06:32 - PredictorApp - ERROR -   Erro (ValueError) ao aplicar calibrador em 'ProbRaw_Empate': Expected 2D array, got 1D array instead:
array=[0.45852567 0.41941904 0.52663275 0.41130595 0.51028569 0.3465011
 0.4139754  0.51990083 0.45280591 0.43613209 0.40040347 0.44367031
 0.36250047 0.42065778 0.28864126 0.40801526 0.38954429 0.46415549
 0.54939513 0.31970237 0.50476953 0.55254403 0.40071698 0.54199451
 0.46470882 0.54134392 0.50117046 0.34115835 0.34100353 0.37208474
 0.31748876 0.52347053 0.46667269 0.30643064 0.52019801 0.34999338
 0.43301277 0.49969528 0.40303164 0.52032475 0.51866196 0.51443317
 0.48433694 0.41827421 0.4787706  0.50586295 0.37269761 0.5340499
 0.47188351 0.49134688 0.43523277 0.45030548 0.51483759 0.47273451
 0.48009213 0.49070665 0.46978432 0.37162646 0.38319647 0.46067112
 0.36020336 0.48163475 0.53840267 0.39200012 0.47522571 0.49082176
 0.41497942 0.46119093 0.33825279 0.40689038 0.33638151 0.47547347
 0.44818692 0.46667331].
Reshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.. Coluna 'Prob_Empate' terá NaN.
Traceback (most recent call last):
  File "c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src\predictor.py", line 102, in make_predictions
    proba_draw_calibrated_array = calibrator.predict(proba_draw_raw_values)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\linear_model\_base.py", line 374, in predict
    scores = self.decision_function(X)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\linear_model\_base.py", line 351, in decision_function
    X = validate_data(self, X, accept_sparse="csr", reset=False)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 2944, in validate_data
    out = check_array(X, input_name="X", **check_params)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 1093, in check_array
    raise ValueError(msg)
ValueError: Expected 2D array, got 1D array instead:
array=[0.45852567 0.41941904 0.52663275 0.41130595 0.51028569 0.3465011
 0.4139754  0.51990083 0.45280591 0.43613209 0.40040347 0.44367031
 0.36250047 0.42065778 0.28864126 0.40801526 0.38954429 0.46415549
 0.54939513 0.31970237 0.50476953 0.55254403 0.40071698 0.54199451
 0.46470882 0.54134392 0.50117046 0.34115835 0.34100353 0.37208474
 0.31748876 0.52347053 0.46667269 0.30643064 0.52019801 0.34999338
 0.43301277 0.49969528 0.40303164 0.52032475 0.51866196 0.51443317
 0.48433694 0.41827421 0.4787706  0.50586295 0.37269761 0.5340499
 0.47188351 0.49134688 0.43523277 0.45030548 0.51483759 0.47273451
 0.48009213 0.49070665 0.46978432 0.37162646 0.38319647 0.46067112
 0.36020336 0.48163475 0.53840267 0.39200012 0.47522571 0.49082176
 0.41497942 0.46119093 0.33825279 0.40689038 0.33638151 0.47547347
 0.44818692 0.46667331].
Reshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.
2025-05-13 19:06:32 - PredictorApp - INFO -   Calculando EV usando probs brutas...
2025-05-13 19:06:32 - PredictorApp - INFO -   -> EV_Empate calculado para 74 jogos.
2025-05-13 19:06:32 - PredictorApp - INFO - Previsões (com EV e probs Raw/Calib) geradas.
2025-05-13 19:06:32 - PredictorApp - INFO - Realizando previsões (Pipeline) para 74 jogos...
2025-05-13 19:06:32 - PredictorApp - INFO -   Aplicando scaler...
2025-05-13 19:06:32 - PredictorApp - INFO -   Calculando probs brutas...
2025-05-13 19:06:32 - PredictorApp - INFO -   Aplicando calibrador na coluna 'ProbRaw_Empate'...
2025-05-13 19:06:32 - PredictorApp - ERROR -   Erro (ValueError) ao aplicar calibrador em 'ProbRaw_Empate': Expected 2D array, got 1D array instead:
array=[0.45852567 0.41941904 0.52663275 0.41130595 0.51028569 0.3465011
 0.4139754  0.51990083 0.45280591 0.43613209 0.40040347 0.44367031
 0.36250047 0.42065778 0.28864126 0.40801526 0.38954429 0.46415549
 0.54939513 0.31970237 0.50476953 0.55254403 0.40071698 0.54199451
 0.46470882 0.54134392 0.50117046 0.34115835 0.34100353 0.37208474
 0.31748876 0.52347053 0.46667269 0.30643064 0.52019801 0.34999338
 0.43301277 0.49969528 0.40303164 0.52032475 0.51866196 0.51443317
 0.48433694 0.41827421 0.4787706  0.50586295 0.37269761 0.5340499
 0.47188351 0.49134688 0.43523277 0.45030548 0.51483759 0.47273451
 0.48009213 0.49070665 0.46978432 0.37162646 0.38319647 0.46067112
 0.36020336 0.48163475 0.53840267 0.39200012 0.47522571 0.49082176
 0.41497942 0.46119093 0.33825279 0.40689038 0.33638151 0.47547347
 0.44818692 0.46667331].
Reshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.. Coluna 'Prob_Empate' terá NaN.
Traceback (most recent call last):
  File "c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src\predictor.py", line 102, in make_predictions
    proba_draw_calibrated_array = calibrator.predict(proba_draw_raw_values)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\linear_model\_base.py", line 374, in predict
    scores = self.decision_function(X)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\linear_model\_base.py", line 351, in decision_function
    X = validate_data(self, X, accept_sparse="csr", reset=False)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 2944, in validate_data
    out = check_array(X, input_name="X", **check_params)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 1093, in check_array
    raise ValueError(msg)
ValueError: Expected 2D array, got 1D array instead:
array=[0.45852567 0.41941904 0.52663275 0.41130595 0.51028569 0.3465011
 0.4139754  0.51990083 0.45280591 0.43613209 0.40040347 0.44367031
 0.36250047 0.42065778 0.28864126 0.40801526 0.38954429 0.46415549
 0.54939513 0.31970237 0.50476953 0.55254403 0.40071698 0.54199451
 0.46470882 0.54134392 0.50117046 0.34115835 0.34100353 0.37208474
 0.31748876 0.52347053 0.46667269 0.30643064 0.52019801 0.34999338
 0.43301277 0.49969528 0.40303164 0.52032475 0.51866196 0.51443317
 0.48433694 0.41827421 0.4787706  0.50586295 0.37269761 0.5340499
 0.47188351 0.49134688 0.43523277 0.45030548 0.51483759 0.47273451
 0.48009213 0.49070665 0.46978432 0.37162646 0.38319647 0.46067112
 0.36020336 0.48163475 0.53840267 0.39200012 0.47522571 0.49082176
 0.41497942 0.46119093 0.33825279 0.40689038 0.33638151 0.47547347
 0.44818692 0.46667331].
Reshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.
2025-05-13 19:06:32 - PredictorApp - INFO -   Calculando EV usando probs brutas...
2025-05-13 19:06:32 - PredictorApp - INFO -   -> EV_Empate calculado para 74 jogos.
2025-05-13 19:06:32 - PredictorApp - INFO - Previsões (com EV e probs Raw/Calib) geradas.
2025-05-13 19:24:27 - MainApp - INFO - Fechando aplicação.
2025-05-13 19:24:27 - MainApp - INFO - Destruindo janela principal.
