2025-05-08 18:30:11 - MainApp - INFO - APP_DIR (launcher): c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src
2025-05-08 18:30:11 - MainApp - INFO - SRC_DIR: c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src\src
2025-05-08 18:30:11 - MainApp - INFO - BASE_DIR: c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src
2025-05-08 18:30:11 - MainApp - INFO - sys.path includes SRC_DIR?: True, BASE_DIR?: True
2025-05-08 18:30:22 - Config - INFO - Biblioteca 'catboost' carregada.
2025-05-08 18:30:24 - ModelTrainerApp - INFO - Biblioteca 'imbalanced-learn' carregada com sucesso.
2025-05-08 18:30:25 - MainApp - INFO - DPI Awareness set.
2025-05-08 18:30:26 - MainApp - INFO - ScraperUploadTab instanciada.
2025-05-08 18:30:26 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_f1.joblib (Modif.: 2025-05-08 12:54:16)
2025-05-08 18:30:26 - PredictorApp - INFO -   Tipo: GaussianNB | Calib: LogisticRegression | F1 Thr: 0.2480 | EV Thr: 0.1500
2025-05-08 18:30:26 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_roi.joblib (Modif.: 2025-05-08 12:54:16)
2025-05-08 18:30:26 - PredictorApp - INFO -   Tipo: VotingClassifier | Calib: LogisticRegression | F1 Thr: 0.2454 | EV Thr: 0.1300
2025-05-08 18:30:26 - DataHandler - INFO - Iniciando carregamento/mapeamento histórico (FILTRO ATIVO por TARGET_LEAGUES_INTERNAL_IDS)...
2025-05-08 18:30:26 - DataHandler - INFO - Lendo dados_combinados_2019_2025.xlsx...
2025-05-08 18:31:07 - DataHandler - INFO -   -> Lido 97670 linhas de dados_combinados_2019_2025.xlsx.
2025-05-08 18:31:07 - DataHandler - INFO -   Mapeando coluna 'League' para ID Interno usando mapa específico do arquivo...
2025-05-08 18:31:07 - DataHandler - WARNING -     Ligas NÃO mapeadas p/ ID Interno: ['Austria 2. Liga', 'Austria Bundesliga', 'Belgium Pro League', 'Bulgaria First League', 'Chile Primera División', 'China Chinese Super League', 'Croatia Prva HNL', 'Czech Republic First League', 'Denmark Superliga', 'Egypt Egyptian Premier League', 'England Championship', 'England EFL League One', 'England EFL League Two', 'England Premier League', 'Estonia Meistriliiga', 'Finland Veikkausliiga', 'France Ligue 1', 'France Ligue 2', 'Germany 2. Bundesliga', 'Germany Bundesliga', 'Greece Super League', 'Iceland Úrvalsdeild', 'Japan J1 League', 'Japan J2 League', 'Netherlands Eerste Divisie', 'Netherlands Eredivisie', 'Norway Eliteserien', 'Norway First Division', 'Paraguay Division Profesional', 'Poland Ekstraklasa', 'Portugal Liga NOS', 'Portugal LigaPro', 'Republic of Ireland Premier Division', 'Scotland Premiership', 'Slovakia Super Liga', 'Slovenia PrvaLiga', 'South Korea K League 1', 'South Korea K League 2', 'Spain La Liga', 'Sweden Allsvenskan', 'Sweden Superettan', 'Switzerland Challenge League', 'Switzerland Super League', 'Turkey Süper Lig', 'USA MLS', 'Uruguay Primera División', 'Wales Welsh Premier League']
2025-05-08 18:31:07 - DataHandler - INFO -   APLICANDO FILTRO por TARGET_LEAGUES_INTERNAL_IDS...
2025-05-08 18:31:07 - DataHandler - INFO -     -> Filtro: 18177/97670 jogos restantes.
2025-05-08 18:31:07 - DataHandler - INFO -   Aplicando mapeamento geral de colunas (CSV_HIST_COL_MAP)...
2025-05-08 18:31:07 - DataHandler - INFO -   DataFrame dados_combinados_2019_2025.xlsx processado (Shape: (18177, 19)).
2025-05-08 18:31:07 - DataHandler - INFO - Concatenando 1 DFs...
2025-05-08 18:31:07 - DataHandler - INFO - DF histórico combinado: (18177, 19)
2025-05-08 18:31:07 - DataHandler - INFO - Iniciando processamento comum pós-concatenação...
2025-05-08 18:31:07 - DataHandler - WARNING - Coluna numérica esperada 'XG_H' ausente.
2025-05-08 18:31:07 - DataHandler - WARNING - Coluna numérica esperada 'XG_A' ausente.
2025-05-08 18:31:07 - DataHandler - WARNING - Coluna numérica esperada 'XG_Total' ausente.
2025-05-08 18:31:07 - DataHandler - INFO - Verificando NaNs essenciais: ['Date', 'Home', 'Away', 'Goals_H_FT', 'Goals_A_FT', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-08 18:31:07 - DataHandler - INFO - Removidas 239 linhas NaNs essenciais.
2025-05-08 18:31:07 - DataHandler - INFO - DF histórico ordenado.
2025-05-08 18:31:07 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-08 18:31:08 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-08 18:31:08 - DataHandler - INFO - Carregamento histórico OK (FILTRADO). Shape Final: (17938, 26)
2025-05-08 18:31:08 - DataHandler - INFO - Contagem NaNs finais (opcionais):
Odd_BTTS_No        154
Odd_BTTS_Yes       154
Odd_Under25_FT     156
Odd_Over25_FT      156
PiR_Mom_5G_H       591
PiR_Mom_5G_A       616
PiR_Mom_5G_Diff    793
dtype: int64
2025-05-08 18:31:08 - MainApp - INFO - FootballPredictorDashboard instanciada.
2025-05-08 18:31:08 - MainApp - INFO - FeatureAnalyzerApp instanciada.
2025-05-08 18:31:08 - MainApp - INFO - ModelInterpreterApp instanciada.
2025-05-08 18:35:27 - DataHandler - INFO - Iniciando carregamento/mapeamento histórico (FILTRO ATIVO por TARGET_LEAGUES_INTERNAL_IDS)...
2025-05-08 18:35:27 - DataHandler - INFO - Lendo dados_combinados_2019_2025.xlsx...
2025-05-08 18:36:06 - DataHandler - INFO -   -> Lido 97670 linhas de dados_combinados_2019_2025.xlsx.
2025-05-08 18:36:06 - DataHandler - INFO -   Mapeando coluna 'League' para ID Interno usando mapa específico do arquivo...
2025-05-08 18:36:06 - DataHandler - WARNING -     Ligas NÃO mapeadas p/ ID Interno: ['Austria 2. Liga', 'Austria Bundesliga', 'Belgium Pro League', 'Bulgaria First League', 'Chile Primera División', 'China Chinese Super League', 'Croatia Prva HNL', 'Czech Republic First League', 'Denmark Superliga', 'Egypt Egyptian Premier League', 'England Championship', 'England EFL League One', 'England EFL League Two', 'England Premier League', 'Estonia Meistriliiga', 'Finland Veikkausliiga', 'France Ligue 1', 'France Ligue 2', 'Germany 2. Bundesliga', 'Germany Bundesliga', 'Greece Super League', 'Iceland Úrvalsdeild', 'Japan J1 League', 'Japan J2 League', 'Netherlands Eerste Divisie', 'Netherlands Eredivisie', 'Norway Eliteserien', 'Norway First Division', 'Paraguay Division Profesional', 'Poland Ekstraklasa', 'Portugal Liga NOS', 'Portugal LigaPro', 'Republic of Ireland Premier Division', 'Scotland Premiership', 'Slovakia Super Liga', 'Slovenia PrvaLiga', 'South Korea K League 1', 'South Korea K League 2', 'Spain La Liga', 'Sweden Allsvenskan', 'Sweden Superettan', 'Switzerland Challenge League', 'Switzerland Super League', 'Turkey Süper Lig', 'USA MLS', 'Uruguay Primera División', 'Wales Welsh Premier League']
2025-05-08 18:36:06 - DataHandler - INFO -   APLICANDO FILTRO por TARGET_LEAGUES_INTERNAL_IDS...
2025-05-08 18:36:06 - DataHandler - INFO -     -> Filtro: 18177/97670 jogos restantes.
2025-05-08 18:36:06 - DataHandler - INFO -   Aplicando mapeamento geral de colunas (CSV_HIST_COL_MAP)...
2025-05-08 18:36:06 - DataHandler - INFO -   DataFrame dados_combinados_2019_2025.xlsx processado (Shape: (18177, 19)).
2025-05-08 18:36:06 - DataHandler - INFO - Concatenando 1 DFs...
2025-05-08 18:36:06 - DataHandler - INFO - DF histórico combinado: (18177, 19)
2025-05-08 18:36:06 - DataHandler - INFO - Iniciando processamento comum pós-concatenação...
2025-05-08 18:36:06 - DataHandler - WARNING - Coluna numérica esperada 'XG_H' ausente.
2025-05-08 18:36:06 - DataHandler - WARNING - Coluna numérica esperada 'XG_A' ausente.
2025-05-08 18:36:06 - DataHandler - WARNING - Coluna numérica esperada 'XG_Total' ausente.
2025-05-08 18:36:06 - DataHandler - INFO - Verificando NaNs essenciais: ['Date', 'Home', 'Away', 'Goals_H_FT', 'Goals_A_FT', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-08 18:36:06 - DataHandler - INFO - Removidas 239 linhas NaNs essenciais.
2025-05-08 18:36:06 - DataHandler - INFO - DF histórico ordenado.
2025-05-08 18:36:06 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-08 18:36:07 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-08 18:36:07 - DataHandler - INFO - Carregamento histórico OK (FILTRADO). Shape Final: (17938, 26)
2025-05-08 18:36:07 - DataHandler - INFO - Contagem NaNs finais (opcionais):
Odd_BTTS_No        154
Odd_BTTS_Yes       154
Odd_Under25_FT     156
Odd_Over25_FT      156
PiR_Mom_5G_H       591
PiR_Mom_5G_A       616
PiR_Mom_5G_Diff    793
dtype: int64
2025-05-08 18:36:07 - DataHandler - INFO - --- Iniciando Pré-proc e Feature Eng (Histórico) ---
2025-05-08 18:36:07 - DataHandler - INFO - Médias Liga: Casa=1.353, Fora=1.045
2025-05-08 18:36:07 - DataHandler - INFO - === INÍCIO PIPELINE FEAT ENG (HISTÓRICO) ===
2025-05-08 18:36:07 - DataHandler - INFO - Calculando stats intermediárias...
2025-05-08 18:36:07 - DataHandler - INFO - ->Result/IsDraw/Ptos OK.
2025-05-08 18:36:07 - DataHandler - INFO - ->Calculando p_H/D/A...
2025-05-08 18:36:07 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 18:36:07 - DataHandler - INFO - ->VG/CG Raw OK.
2025-05-08 18:36:07 - DataHandler - INFO - Cálculo Intermediárias concluído.
2025-05-08 18:36:07 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 18:36:07 - DataHandler - INFO - Probabilidades Normalizadas (p_X_norm, abs_ProbDiff_Norm) calculadas.
2025-05-08 18:36:07 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-08 18:36:08 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-08 18:36:08 - DataHandler - INFO - Calculando 9 métricas rolling (Janela Padrão=5)...
2025-05-08 18:36:20 - DataHandler - INFO - Métricas rolling calculadas. Shape: (17938, 18).
2025-05-08 18:36:20 - DataHandler - INFO - Calculando 4 métricas EWMA (Span Padrão=5)...
2025-05-08 18:36:48 - DataHandler - INFO - Métricas EWMA calculadas. Shape: (17938, 8).
2025-05-08 18:36:48 - DataHandler - INFO - Calculando Prob Empate (Poisson Refinado, max_goals=6)...
2025-05-08 18:36:48 - DataHandler - INFO - Prob_Empate_Poisson (Refinado) calculado.
2025-05-08 18:36:48 - DataHandler - INFO - Binning ('Odd_D_Cat') calculado a partir de 'Odd_D_FT'.
2025-05-08 18:36:48 - DataHandler - INFO - Calculando features derivadas (CV_HDA, Diff_Media_CG, Novas Interações)...
2025-05-08 18:36:48 - DataHandler - INFO - Features de interação calculadas (incluindo novas).
2025-05-08 18:36:48 - DataHandler - INFO - === FIM PIPELINE FEAT ENG (HISTÓRICO) ===
2025-05-08 18:36:48 - DataHandler - INFO - Selecionando features FINAIS para modelo: ['Prob_Empate_Poisson', 'abs_ProbDiff_Norm', 'Odd_Over25_FT', 'CV_HDA']
2025-05-08 18:36:48 - DataHandler - INFO - DF selecionado p/ dropna: (17938, 5). Verificando NaNs...
2025-05-08 18:36:48 - DataHandler - WARNING - NaNs ANTES dropna final nas features selecionadas:
Odd_Over25_FT    156
dtype: int64
2025-05-08 18:36:48 - DataHandler - INFO - Removidas 156 linhas contendo NaNs/Infs nas features finais ou no alvo.
2025-05-08 18:36:48 - DataHandler - INFO - --- Pré-proc Histórico OK --- Shape Final X:(17782, 4), y:(17782,).
2025-05-08 18:36:48 - DataHandler - INFO - Calculando stats intermediárias...
2025-05-08 18:36:48 - DataHandler - INFO - ->Result/IsDraw/Ptos OK.
2025-05-08 18:36:48 - DataHandler - INFO - ->Calculando p_H/D/A...
2025-05-08 18:36:48 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 18:36:48 - DataHandler - INFO - ->VG/CG Raw OK.
2025-05-08 18:36:48 - DataHandler - INFO - Cálculo Intermediárias concluído.
2025-05-08 18:36:48 - Main2 - INFO - DEBUG Main: df_full_data_aligned_for_split (17782, 37)
2025-05-08 18:36:48 - ModelTrainerApp - INFO - --- Treinando 7 Modelos (Sampler: smote, CV Temporal: f1, Opt(F1:True, EV:True, Prec:True), Calib: sigmoid) ---
2025-05-08 18:36:48 - ModelTrainerApp - INFO - Dividindo dados temporalmente (Treino+CV / Teste Final)...
2025-05-08 18:36:48 - ModelTrainerApp - INFO - Split Temporal: T+CV=14226 (80.0%), Teste=3556 (20.0%)
2025-05-08 18:36:48 - ModelTrainerApp - INFO - Odds alinhadas (Temporal): Teste=True (3556 jogos)
2025-05-08 18:36:48 - ModelTrainerApp - INFO - 
--- Modelo 1/7: RandomForestClassifier ---
2025-05-08 18:36:48 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: RandomForestClassifier)
2025-05-08 18:36:48 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 18:42:40 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4265. Params: {'bootstrap': True, 'class_weight': 'balanced_subsample', 'max_depth': 5, 'max_features': 0.6, 'min_samples_leaf': 3, 'min_samples_split': 25, 'n_estimators': 50}
2025-05-08 18:42:40 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 18:42:40 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 18:42:40 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 18:42:40 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 18:42:40 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 18:42:40 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.1971 (F1=0.4650)
2025-05-08 18:42:40 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.150 (ROI=7.78%)
2025-05-08 18:42:40 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3337 (Prec=0.3671, Rec=0.1268)
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4421, P=0.3257, R=0.6878
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.1971): F1=0.4650, P=0.3044, R=0.9839
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3337): F1=0.1885, P=0.3671, R=0.1268
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5597, Brier(Calib(sigmoid (LogisticRegression)))=0.2069
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.150) = 7.78% (105 bets)
2025-05-08 18:42:52 - ModelTrainerApp - INFO -     ==> Resultado FINAL RandomForestClassifier adicionado.
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Tempo p/ RandomForestClassifier: 363.92 seg.
2025-05-08 18:42:52 - ModelTrainerApp - INFO - 
--- Modelo 2/7: LogisticRegression ---
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-08 18:42:52 - ModelTrainerApp - INFO -  -> Scaling OK.
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: LogisticRegression)
2025-05-08 18:42:52 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 18:44:59 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4294. Params: {'C': 0.0001, 'class_weight': 'balanced', 'max_iter': 1340, 'penalty': 'l2', 'solver': 'liblinear'}
2025-05-08 18:44:59 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 18:44:59 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 18:44:59 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 18:44:59 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 18:44:59 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 18:44:59 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.2447 (F1=0.4673)
2025-05-08 18:45:00 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.200 (ROI=20.86%)
2025-05-08 18:45:00 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3540 (Prec=0.3737, Rec=0.1315)
2025-05-08 18:45:14 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 18:45:14 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4367, P=0.3338, R=0.6310
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.2447): F1=0.4673, P=0.3156, R=0.8997
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3540): F1=0.1945, P=0.3737, R=0.1315
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5626, Brier(Calib(sigmoid (LogisticRegression)))=0.2066
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.200) = 20.86% (65 bets)
2025-05-08 18:45:14 - ModelTrainerApp - INFO -     ==> Resultado FINAL LogisticRegression adicionado.
2025-05-08 18:45:14 - ModelTrainerApp - INFO -   Tempo p/ LogisticRegression: 142.16 seg.
2025-05-08 18:45:14 - ModelTrainerApp - INFO - 
--- Modelo 3/7: LGBMClassifier ---
2025-05-08 18:45:14 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: LGBMClassifier)
2025-05-08 18:45:14 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 18:53:53 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4321. Params: {'boosting_type': 'dart', 'colsample_bytree': 0.8584894905498577, 'learning_rate': 0.005, 'max_depth': 3, 'n_estimators': 397, 'num_leaves': 100, 'reg_alpha': 1.1580575204889152, 'reg_lambda': 0.4137034673581412, 'subsample': 0.9}
2025-05-08 18:53:53 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 18:53:54 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 18:53:54 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 18:53:54 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 18:53:54 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 18:53:54 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.2140 (F1=0.4646)
2025-05-08 18:53:54 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.100 (ROI=4.05%)
2025-05-08 18:53:54 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3299 (Prec=0.3464, Rec=0.2167)
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4433, P=0.3266, R=0.6897
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.2140): F1=0.4646, P=0.3062, R=0.9622
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3299): F1=0.2666, P=0.3464, R=0.2167
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5587, Brier(Calib(sigmoid (LogisticRegression)))=0.2070
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.100) = 4.05% (264 bets)
2025-05-08 18:53:55 - ModelTrainerApp - INFO -     ==> Resultado FINAL LGBMClassifier adicionado.
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Tempo p/ LGBMClassifier: 521.21 seg.
2025-05-08 18:53:55 - ModelTrainerApp - INFO - 
--- Modelo 4/7: SVC ---
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-08 18:53:55 - ModelTrainerApp - INFO -  -> Scaling OK.
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: SVC)
2025-05-08 18:53:55 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 20:26:07 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4532. Params: {'C': 0.020251176397323482, 'class_weight': 'balanced', 'gamma': 0.0042407197336443905, 'kernel': 'rbf'}
2025-05-08 20:26:07 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 20:27:23 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 20:27:28 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 20:27:28 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 20:27:28 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 20:27:28 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.2529 (F1=0.4677)
2025-05-08 20:27:28 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.170 (ROI=25.79%)
2025-05-08 20:27:28 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 20:27:41 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3587 (Prec=0.3790, Rec=0.1126)
2025-05-08 20:27:41 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 20:27:41 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 20:27:45 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4612, P=0.3224, R=0.8098
2025-05-08 20:27:45 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.2529): F1=0.4677, P=0.3208, R=0.8628
2025-05-08 20:27:45 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3587): F1=0.1736, P=0.3790, R=0.1126
2025-05-08 20:27:45 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5635, Brier(Calib(sigmoid (LogisticRegression)))=0.2065
2025-05-08 20:27:45 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.170) = 25.79% (71 bets)
2025-05-08 20:27:45 - ModelTrainerApp - INFO -     ==> Resultado FINAL SVC adicionado.
2025-05-08 20:27:45 - ModelTrainerApp - INFO -   Tempo p/ SVC: 5630.45 seg.
2025-05-08 20:27:45 - ModelTrainerApp - INFO - 
--- Modelo 5/7: KNeighborsClassifier ---
2025-05-08 20:27:45 - ModelTrainerApp - INFO -   Aplicando StandardScaler...
2025-05-08 20:27:45 - ModelTrainerApp - INFO -   Scaling concluído.
2025-05-08 20:27:45 - ModelTrainerApp - INFO -  -> Scaling OK.
2025-05-08 20:27:45 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: KNeighborsClassifier)
2025-05-08 20:27:45 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 20:29:12 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4025. Params: {'metric': 'minkowski', 'n_neighbors': 75, 'p': 1, 'weights': 'uniform'}
2025-05-08 20:29:12 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 20:29:12 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 20:29:12 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 20:29:12 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 20:29:12 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 20:29:12 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.2192 (F1=0.4637)
2025-05-08 20:29:12 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.200 (ROI=11.90%)
2025-05-08 20:29:12 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3477 (Prec=0.3657, Rec=0.1495)
2025-05-08 20:29:13 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 20:29:13 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4100, P=0.3218, R=0.5648
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.2192): F1=0.4637, P=0.3032, R=0.9858
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3477): F1=0.2122, P=0.3657, R=0.1495
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5509, Brier(Calib(sigmoid (LogisticRegression)))=0.2072
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.200) = 11.90% (295 bets)
2025-05-08 20:29:13 - ModelTrainerApp - INFO -     ==> Resultado FINAL KNeighborsClassifier adicionado.
2025-05-08 20:29:13 - ModelTrainerApp - INFO -   Tempo p/ KNeighborsClassifier: 87.46 seg.
2025-05-08 20:29:13 - ModelTrainerApp - INFO - 
--- Modelo 6/7: CatBoostClassifier ---
2025-05-08 20:29:13 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: CatBoostClassifier)
2025-05-08 20:29:13 - ModelTrainerApp - INFO -   Iniciando BayesSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 21:40:07 - ModelTrainerApp - INFO -     -> Busca CV (BayesSearchCV) OK. Melhor CV f1: 0.4365. Params: {'boosting_type': 'Ordered', 'border_count': 255, 'depth': 4, 'iterations': 100, 'l2_leaf_reg': 1.0, 'learning_rate': 0.008000000000000004, 'subsample': 0.5}
2025-05-08 21:40:07 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 21:40:07 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 21:40:07 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 21:40:07 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 21:40:07 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 21:40:07 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.2443 (F1=0.4650)
2025-05-08 21:40:08 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.170 (ROI=17.44%)
2025-05-08 21:40:08 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3381 (Prec=0.3661, Rec=0.1022)
2025-05-08 21:40:19 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 21:40:19 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4501, P=0.3234, R=0.7398
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.2443): F1=0.4650, P=0.3132, R=0.9026
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3381): F1=0.1598, P=0.3661, R=0.1022
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5598, Brier(Calib(sigmoid (LogisticRegression)))=0.2066
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.170) = 17.44% (39 bets)
2025-05-08 21:40:19 - ModelTrainerApp - INFO -     ==> Resultado FINAL CatBoostClassifier adicionado.
2025-05-08 21:40:19 - ModelTrainerApp - INFO -   Tempo p/ CatBoostClassifier: 4266.18 seg.
2025-05-08 21:40:19 - ModelTrainerApp - INFO - 
--- Modelo 7/7: GaussianNB ---
2025-05-08 21:40:19 - ModelTrainerApp - INFO -   Pipeline criado (Sampler: SMOTE, Classifier: GaussianNB)
2025-05-08 21:40:19 - ModelTrainerApp - INFO -   Iniciando GridSearchCV (Score: f1, CV: Temporal 5 splits)...
2025-05-08 21:40:20 - ModelTrainerApp - INFO -     -> Busca CV (GridSearchCV) OK. Melhor CV f1: 0.4487. Params: {'var_smoothing': np.float64(0.0012742749857031321)}
2025-05-08 21:40:20 - ModelTrainerApp - INFO -   Re-ajustando MELHOR pipeline encontrado pela CV em TODO X_train_cv...
2025-05-08 21:40:20 - ModelTrainerApp - INFO -   -> Re-ajuste final OK.
2025-05-08 21:40:20 - ModelTrainerApp - WARNING -   AVISO: Calibrando probs (sigmoid) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 21:40:20 - ModelTrainerApp - INFO -   -> Calibrador (sigmoid (LogisticRegression)) treinado (no Teste).
2025-05-08 21:40:20 - ModelTrainerApp - WARNING -   AVISO: Otimizando limiares (F1, EV, Prec) no CONJUNTO DE TESTE (avaliação otimista)...
2025-05-08 21:40:20 - ModelTrainerApp - INFO -     Limiar F1 ótimo(Teste): 0.2314 (F1=0.4656)
2025-05-08 21:40:20 - ModelTrainerApp - INFO -     Limiar EV ótimo(Teste): 0.190 (ROI=36.26%)
2025-05-08 21:40:20 - ModelTrainerApp - INFO -   Otimizando Precision (Teste Probs Calib(sigmoid (LogisticRegression)), Recall Mín: 10.0%)...
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     Limiar Prec ótimo(Teste): 0.3446 (Prec=0.3633, Rec=0.1031)
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Avaliando Modelo FINAL no Teste...
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Calculando métricas teste final (probs: Calib(sigmoid (LogisticRegression)))
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     -> Métricas @ Thr 0.5: F1=0.4562, P=0.3267, R=0.7559
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     -> Métricas @ Thr F1 (0.2314): F1=0.4656, P=0.3129, R=0.9092
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     -> Métricas @ Thr Prec (0.3446): F1=0.1606, P=0.3633, R=0.1031
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     -> AUC(Calib(sigmoid (LogisticRegression)))=0.5590, Brier(Calib(sigmoid (LogisticRegression)))=0.2066
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     -> ROI @ Thr EV (0.190) = 36.26% (54 bets)
2025-05-08 21:40:33 - ModelTrainerApp - INFO -     ==> Resultado FINAL GaussianNB adicionado.
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Tempo p/ GaussianNB: 13.76 seg.
2025-05-08 21:40:33 - ModelTrainerApp - INFO - 
--- Criando Ensemble com Top 3 Modelos (por F1 no Teste): ['SVC', 'LogisticRegression', 'GaussianNB'] ---
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Usando pipeline_object para SVC no ensemble.
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Usando pipeline_object para LogisticRegression no ensemble.
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Usando pipeline_object para GaussianNB no ensemble.
2025-05-08 21:40:33 - ModelTrainerApp - INFO -   Ajustando o wrapper VotingClassifier...
2025-05-08 21:41:50 - ModelTrainerApp - INFO -   Wrapper VotingClassifier ajustado.
2025-05-08 21:41:50 - ModelTrainerApp - INFO -   Avaliando VotingClassifier (ajustado) no Teste...
2025-05-08 21:42:00 - ModelTrainerApp - INFO -   Calibrando/Otimizando limiares p/ Ensemble (no Teste, Método: sigmoid)...
2025-05-08 21:42:01 - ModelTrainerApp - INFO -   --- Métricas Ensemble (Teste) ---
2025-05-08 21:42:01 - ModelTrainerApp - INFO -     F1 @ThrF1(0.2314) = 0.4655
2025-05-08 21:42:01 - ModelTrainerApp - INFO -     Prec @ThrPrec(0.3440) = 0.3526 (Recall: 0.1097)
2025-05-08 21:42:01 - ModelTrainerApp - INFO -     AUC = 0.5590, Brier = 0.2066
2025-05-08 21:42:01 - ModelTrainerApp - INFO -     ROI @ThrEV(0.190) = 36.26% (54 bets)
2025-05-08 21:42:01 - ModelTrainerApp - INFO -   ---------------------------------
2025-05-08 21:42:01 - ModelTrainerApp - INFO - --- Treino concluído (11112.90 seg) ---
2025-05-08 21:42:01 - ModelTrainerApp - INFO - --- Comparativo Desempenho Modelos (Teste Final) ---
2025-05-08 21:42:01 - ModelTrainerApp - INFO - 
            model_name  f1_score_draw  precision_draw_thrF1  recall_draw_thrF1  precision_draw_thrPrec  recall_draw_thrPrec  f1_score_draw_thrPrec    auc  brier    roi  num_bets  optimal_f1_threshold  optimal_ev_threshold  optimal_precision_threshold
                   SVC         0.4677                0.3208             0.8628                  0.3790               0.1126                 0.1736 0.5635 0.2065 25.79%        71                0.2529                  0.17                       0.3587
    LogisticRegression         0.4673                0.3156             0.8997                  0.3737               0.1315                 0.1945 0.5626 0.2066 20.86%        65                0.2447                  0.20                       0.3540
            GaussianNB         0.4656                0.3129             0.9092                  0.3633               0.1031                 0.1606 0.5590 0.2066 36.26%        54                0.2314                  0.19                       0.3446
        VotingEnsemble         0.4655                0.3128             0.9092                  0.3526               0.1097                 0.1674 0.5590 0.2066 36.26%        54                0.2314                  0.19                       0.3440
    CatBoostClassifier         0.4650                0.3132             0.9026                  0.3661               0.1022                 0.1598 0.5598 0.2066 17.44%        39                0.2443                  0.17                       0.3381
RandomForestClassifier         0.4650                0.3044             0.9839                  0.3671               0.1268                 0.1885 0.5597 0.2069  7.78%       105                0.1971                  0.15                       0.3337
        LGBMClassifier         0.4646                0.3062             0.9622                  0.3464               0.2167                 0.2666 0.5587 0.2070  4.05%       264                0.2140                  0.10                       0.3299
  KNeighborsClassifier         0.4637                0.3032             0.9858                  0.3657               0.1495                 0.2122 0.5509 0.2072 11.90%       295                0.2192                  0.20                       0.3477
2025-05-08 21:42:01 - ModelTrainerApp - INFO - --------------------------------------------------------------------------------
2025-05-08 21:42:01 - ModelTrainerApp - INFO - SELEÇÃO: Melhor ROI Válido: GaussianNB (ROI=36.26%)
2025-05-08 21:42:01 - ModelTrainerApp - INFO - Salvando Melhor F1 (SVC)...
2025-05-08 21:42:01 - ModelTrainerApp - INFO -   -> Objeto salvo: 'SVC' (F1 Thr=0.2529, EV Thr=0.170, Prec Thr=0.3587) em best_model_backdraw_best_f1.joblib.
2025-05-08 21:42:01 - ModelTrainerApp - INFO -   -> Usando Melhor ROI (GaussianNB) p/ slot ROI.
2025-05-08 21:42:01 - ModelTrainerApp - INFO - Salvando Melhor ROI/2nd F1 (GaussianNB)...
2025-05-08 21:42:01 - ModelTrainerApp - INFO -   -> Objeto salvo: 'GaussianNB' (F1 Thr=0.2314, EV Thr=0.190, Prec Thr=0.3446) em best_model_backdraw_best_roi.joblib.
2025-05-08 21:42:01 - ModelTrainerApp - INFO - --- Processo Completo ---
2025-05-08 21:42:01 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_f1.joblib (Modif.: 2025-05-08 21:42:01)
2025-05-08 21:42:01 - PredictorApp - INFO -   Tipo: SVC | Calib: LogisticRegression | F1 Thr: 0.2529 | EV Thr: 0.1700
2025-05-08 21:42:01 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_roi.joblib (Modif.: 2025-05-08 21:42:01)
2025-05-08 21:42:01 - PredictorApp - INFO -   Tipo: GaussianNB | Calib: LogisticRegression | F1 Thr: 0.2314 | EV Thr: 0.1900
2025-05-08 22:02:46 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Iniciando: Carregando & Processando dados históricos...
2025-05-08 22:02:46 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Etapa 1: Carregando dados brutos...
2025-05-08 22:02:46 - DataHandler - INFO - Iniciando carregamento/mapeamento histórico (FILTRO ATIVO por TARGET_LEAGUES_INTERNAL_IDS)...
2025-05-08 22:02:46 - DataHandler - INFO - Lendo dados_combinados_2019_2025.xlsx...
2025-05-08 22:03:25 - DataHandler - INFO -   -> Lido 97670 linhas de dados_combinados_2019_2025.xlsx.
2025-05-08 22:03:25 - DataHandler - INFO -   Mapeando coluna 'League' para ID Interno usando mapa específico do arquivo...
2025-05-08 22:03:25 - DataHandler - WARNING -     Ligas NÃO mapeadas p/ ID Interno: ['Austria 2. Liga', 'Austria Bundesliga', 'Belgium Pro League', 'Bulgaria First League', 'Chile Primera División', 'China Chinese Super League', 'Croatia Prva HNL', 'Czech Republic First League', 'Denmark Superliga', 'Egypt Egyptian Premier League', 'England Championship', 'England EFL League One', 'England EFL League Two', 'England Premier League', 'Estonia Meistriliiga', 'Finland Veikkausliiga', 'France Ligue 1', 'France Ligue 2', 'Germany 2. Bundesliga', 'Germany Bundesliga', 'Greece Super League', 'Iceland Úrvalsdeild', 'Japan J1 League', 'Japan J2 League', 'Netherlands Eerste Divisie', 'Netherlands Eredivisie', 'Norway Eliteserien', 'Norway First Division', 'Paraguay Division Profesional', 'Poland Ekstraklasa', 'Portugal Liga NOS', 'Portugal LigaPro', 'Republic of Ireland Premier Division', 'Scotland Premiership', 'Slovakia Super Liga', 'Slovenia PrvaLiga', 'South Korea K League 1', 'South Korea K League 2', 'Spain La Liga', 'Sweden Allsvenskan', 'Sweden Superettan', 'Switzerland Challenge League', 'Switzerland Super League', 'Turkey Süper Lig', 'USA MLS', 'Uruguay Primera División', 'Wales Welsh Premier League']
2025-05-08 22:03:25 - DataHandler - INFO -   APLICANDO FILTRO por TARGET_LEAGUES_INTERNAL_IDS...
2025-05-08 22:03:25 - DataHandler - INFO -     -> Filtro: 18177/97670 jogos restantes.
2025-05-08 22:03:25 - DataHandler - INFO -   Aplicando mapeamento geral de colunas (CSV_HIST_COL_MAP)...
2025-05-08 22:03:25 - DataHandler - INFO -   DataFrame dados_combinados_2019_2025.xlsx processado (Shape: (18177, 19)).
2025-05-08 22:03:25 - DataHandler - INFO - Concatenando 1 DFs...
2025-05-08 22:03:25 - DataHandler - INFO - DF histórico combinado: (18177, 19)
2025-05-08 22:03:25 - DataHandler - INFO - Iniciando processamento comum pós-concatenação...
2025-05-08 22:03:26 - DataHandler - WARNING - Coluna numérica esperada 'XG_H' ausente.
2025-05-08 22:03:26 - DataHandler - WARNING - Coluna numérica esperada 'XG_A' ausente.
2025-05-08 22:03:26 - DataHandler - WARNING - Coluna numérica esperada 'XG_Total' ausente.
2025-05-08 22:03:26 - DataHandler - INFO - Verificando NaNs essenciais: ['Date', 'Home', 'Away', 'Goals_H_FT', 'Goals_A_FT', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-08 22:03:26 - DataHandler - INFO - Removidas 239 linhas NaNs essenciais.
2025-05-08 22:03:26 - DataHandler - INFO - DF histórico ordenado.
2025-05-08 22:03:26 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-08 22:03:27 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-08 22:03:27 - DataHandler - INFO - Carregamento histórico OK (FILTRADO). Shape Final: (17938, 26)
2025-05-08 22:03:27 - DataHandler - INFO - Contagem NaNs finais (opcionais):
Odd_BTTS_No        154
Odd_BTTS_Yes       154
Odd_Under25_FT     156
Odd_Over25_FT      156
PiR_Mom_5G_H       591
PiR_Mom_5G_A       616
PiR_Mom_5G_Diff    793
dtype: int64
2025-05-08 22:03:27 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Dados brutos carregados: (17938, 26)
2025-05-08 22:03:27 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Etapa 2: Processando features (Pipeline Completo)...
2025-05-08 22:03:27 - FeatureAnalyzerAppSimple - INFO - === INÍCIO PIPELINE FEAT ENG (ANALYSIS TAB) ===
2025-05-08 22:03:27 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Médias Liga: H=1.353, A=1.045
2025-05-08 22:03:27 - DataHandler - INFO - Calculando stats intermediárias...
2025-05-08 22:03:27 - DataHandler - INFO - ->Result/IsDraw/Ptos OK.
2025-05-08 22:03:27 - DataHandler - INFO - ->Calculando p_H/D/A...
2025-05-08 22:03:27 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 22:03:27 - DataHandler - INFO - ->VG/CG Raw OK.
2025-05-08 22:03:27 - DataHandler - INFO - Cálculo Intermediárias concluído.
2025-05-08 22:03:27 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 22:03:27 - DataHandler - INFO - Probabilidades Normalizadas (p_X_norm, abs_ProbDiff_Norm) calculadas.
2025-05-08 22:03:27 - DataHandler - INFO - Calculando Pi-Ratings e Momentum (Janela=5)...
2025-05-08 22:03:28 - DataHandler - INFO - Pi-Ratings/Momentum calculados. Colunas: ['PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff']
2025-05-08 22:03:28 - DataHandler - INFO - Iniciando cálculo Médias Rolling (Janela=5)...
2025-05-08 22:03:28 - DataHandler - INFO - Calculando Médias rolling para: ['VG_H', 'VG_A', 'CG_H', 'CG_A']
2025-05-08 22:03:31 - DataHandler - INFO - Médias Rolling calculadas. Colunas adicionadas/atualizadas: ['Media_VG_H', 'Media_VG_A', 'Media_CG_H', 'Media_CG_A']
2025-05-08 22:03:31 - DataHandler - INFO - Iniciando cálculo Desvio Padrão Rolling (Janela=5)...
2025-05-08 22:03:31 - DataHandler - INFO - Calculando StDev rolling para: ['CG_H', 'CG_A']
2025-05-08 22:03:33 - DataHandler - INFO - StDev Rolling calculado. Colunas adicionadas: ['Std_CG_H', 'Std_CG_A']
2025-05-08 22:03:33 - DataHandler - INFO - Calculando Rolling Gols e Forças FA/FD (Janela=5)...
2025-05-08 22:03:35 - DataHandler - INFO - Rolling Gols/FA/FD calculado. Colunas: ['Avg_Gols_Marcados_H', 'Avg_Gols_Sofridos_H', 'FA_H', 'FD_H', 'Avg_Gols_Marcados_A', 'Avg_Gols_Sofridos_A', 'FA_A', 'FD_A']
2025-05-08 22:03:35 - DataHandler - INFO - Calculando Prob Empate (Poisson Refinado, max_goals=6)...
2025-05-08 22:03:35 - DataHandler - INFO - Prob_Empate_Poisson (Refinado) calculado.
2025-05-08 22:03:35 - DataHandler - INFO - Binning ('Odd_D_Cat') calculado a partir de 'Odd_D_FT'.
2025-05-08 22:03:35 - DataHandler - INFO - Calculando features derivadas (CV_HDA, Diff_Media_CG, Novas Interações)...
2025-05-08 22:03:35 - DataHandler - WARNING - Media_GolsMarcados_H ou Media_GolsMarcados_A ausente.
2025-05-08 22:03:35 - DataHandler - WARNING - Media_GolsSofridos_H ou Media_GolsSofridos_A ausente.
2025-05-08 22:03:35 - DataHandler - INFO - Features de interação calculadas (incluindo novas).
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Processamento features concluído.
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - === FIM PIPELINE FEAT ENG ===
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Etapa 3: Preparando dados para análise (sem dropna)...
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Dados p/ análise (bruto processado): X=(17938, 63), y=(17938,)
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Identificador de dados atualizado: ((17938, 63), ('Goals_A_FT', 'Shots_H', 'ShotsOnTarget_H', 'Odd_D_FT', 'Odd_H_FT', 'Corners_H_FT', 'Odd_BTTS_No', 'Odd_BTTS_Yes', 'Odd_A_FT', 'Odd_Under25_FT', 'Goals_H_FT', 'Shots_A', 'ShotsOnTarget_A', 'Odd_Over25_FT', 'Corners_A_FT', 'PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff', 'Ptos_H', 'Ptos_A', 'IsDraw', 'p_H', 'p_D', 'p_A', 'VG_H_raw', 'VG_A_raw', 'CG_H_raw', 'CG_A_raw', 'p_H_norm', 'p_D_norm', 'p_A_norm', 'abs_ProbDiff_Norm', 'Media_VG_H', 'Media_VG_A', 'Media_CG_H', 'Media_CG_A', 'Std_CG_H', 'Std_CG_A', 'Avg_Gols_Marcados_H', 'Avg_Gols_Sofridos_H', 'FA_H', 'FD_H', 'Avg_Gols_Marcados_A', 'Avg_Gols_Sofridos_A', 'FA_A', 'FD_A', 'Prob_Empate_Poisson', 'Odd_D_Cat', 'CV_HDA', 'Diff_Media_CG', 'pDnorm_x_CVHDA', 'pDnorm_div_CVHDA', 'pDnorm_x_PiRDiffAbs', 'pDnorm_div_PiRDiffAbs', 'OddD_x_PiRDiffAbs', 'OddD_div_PiRDiffAbs', 'PiRProbH_x_OddH', 'AvgGolsMarc_Diff', 'AvgGolsSofr_Diff'))
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Etapa 4: Atualizando Describe/Target...
2025-05-08 22:03:35 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Etapa 5: Gerando gráficos básicos...
2025-05-08 22:03:36 - FeatureAnalyzerAppSimple - INFO - [GUI AnalyzerSimple] Carregamento e análise básica concluídos.
2025-05-08 22:04:22 - DataHandler - INFO - Buscando jogos de today (2025-05-08): https://raw.githubusercontent.com/alamoprince/data_base_fut_analytics/main/data/raw_scraped/scraped_fixtures_2025-05-08.csv
2025-05-08 22:04:22 - DataHandler - INFO - Arquivo futuro encontrado. Tentando ler...
2025-05-08 22:04:22 - DataHandler - INFO - Lido com sucesso como CSV.
2025-05-08 22:04:22 - DataHandler - INFO - Arquivo futuro baixado e lido. Shape: (118, 15)
2025-05-08 22:04:22 - DataHandler - INFO - Processando arquivo de jogos futuros...
2025-05-08 22:04:22 - DataHandler - INFO - Filtro de liga DESATIVADO para arquivo de jogos futuros.
2025-05-08 22:04:22 - DataHandler - INFO - Verificando NaNs essenciais (Futuro): ['League', 'Time_Str', 'Home', 'Away', 'Odd_H_FT', 'Odd_D_FT', 'Odd_A_FT']
2025-05-08 22:04:22 - DataHandler - INFO - Futuro: Removidas 50 linhas com NaNs essenciais.
2025-05-08 22:04:22 - DataHandler - INFO - Processamento jogos futuros OK. Shape final: (68, 14)
2025-05-08 22:04:22 - DataHandler - INFO - --- Preparando Features Futuras ---
2025-05-08 22:04:22 - DataHandler - INFO - Calculando/Garantindo features intermediárias no histórico...
2025-05-08 22:04:22 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 22:04:22 - DataHandler - INFO - Calculando stats intermediárias...
2025-05-08 22:04:22 - DataHandler - INFO - ->Result/IsDraw/Ptos OK.
2025-05-08 22:04:22 - DataHandler - INFO - ->VG/CG Raw OK.
2025-05-08 22:04:22 - DataHandler - INFO - Cálculo Intermediárias concluído.
2025-05-08 22:04:22 - DataHandler - INFO - Features intermediárias OK.
2025-05-08 22:04:22 - DataHandler - INFO - Usando Médias Liga (Hist): Casa=1.353, Fora=1.045
2025-05-08 22:04:22 - DataHandler - INFO - Processando histórico p/ estado final rolling/EWMA...
2025-05-08 22:04:22 - DataHandler - INFO - Configs rolling necessárias p/ futuro: ['Media_GolsMarcados', 'Media_GolsSofridos']
2025-05-08 22:04:22 - DataHandler - INFO - Configs EWMA necessárias p/ futuro: ['EWMA_GolsMarc', 'EWMA_GolsSofr']
2025-05-08 22:04:22 - DataHandler - INFO - Construindo estado final histórico rolling/EWMA...
2025-05-08 22:04:23 - DataHandler - INFO - Estado final construído (0.99s) p/ 242 times.
2025-05-08 22:04:23 - DataHandler - INFO - Calculando features rolling/EWMA para jogos futuros...
2025-05-08 22:04:23 - DataHandler - INFO - Rolling/EWMA stats p/ futuro calculadas. Shape: (68, 8).
2025-05-08 22:04:23 - DataHandler - INFO - Calculando Pi-Ratings atuais...
2025-05-08 22:04:24 - DataHandler - WARNING - PiRating Momentum (Futuro) definido como NaN.
2025-05-08 22:04:24 - DataHandler - INFO - Calculando FA/FD, Poisson, Derivadas/Interações futuras...
2025-05-08 22:04:24 - DataHandler - INFO - Probabilidades Implícitas (p_H, p_D, p_A) calculadas.
2025-05-08 22:04:24 - DataHandler - INFO - Probabilidades Normalizadas (p_X_norm, abs_ProbDiff_Norm) calculadas.
2025-05-08 22:04:24 - DataHandler - INFO - Binning ('Odd_D_Cat') calculado a partir de 'Odd_D_FT'.
2025-05-08 22:04:24 - DataHandler - INFO - Calculando Prob Empate (Poisson Refinado, max_goals=6)...
2025-05-08 22:04:24 - DataHandler - INFO - Prob_Empate_Poisson (Refinado) calculado.
2025-05-08 22:04:24 - DataHandler - INFO - Calculando features derivadas (CV_HDA, Diff_Media_CG, Novas Interações)...
2025-05-08 22:04:24 - DataHandler - WARNING - Médias CG ausentes p/ Diff_Media_CG.
2025-05-08 22:04:24 - DataHandler - INFO - Features de interação calculadas (incluindo novas).
2025-05-08 22:04:24 - DataHandler - INFO - Selecionando features FINAIS (['Prob_Empate_Poisson', 'abs_ProbDiff_Norm', 'Odd_Over25_FT', 'CV_HDA']) para predição...
2025-05-08 22:04:24 - DataHandler - INFO - Shape X_fix_prep: (68, 4)
2025-05-08 22:04:24 - DataHandler - WARNING - 6 NaNs restantes. Preenchendo com 0.
2025-05-08 22:04:24 - DataHandler - INFO - --- Preparação Features Futuras OK. Shape Final Retornado: (68, 4) ---
2025-05-08 22:04:24 - PredictorApp - INFO - Realizando previsões (SVC) para 68 jogos...
2025-05-08 22:04:24 - PredictorApp - INFO -   Aplicando scaler...
2025-05-08 22:04:24 - PredictorApp - INFO -   Calculando probs brutas...
2025-05-08 22:04:24 - PredictorApp - INFO -   Aplicando calibrador (LogisticRegression) na coluna 'ProbRaw_Empate'...
2025-05-08 22:04:24 - PredictorApp - INFO -   -> Coluna 'Prob_Empate' (Calibrada) preenchida.
2025-05-08 22:04:24 - PredictorApp - INFO -   Calculando EV usando probs Calibrada...
2025-05-08 22:04:24 - PredictorApp - INFO -   -> EV_Empate calculado para 68 jogos.
2025-05-08 22:04:24 - PredictorApp - INFO - Previsões (com EV e probs Raw/Calib) geradas.
2025-05-08 22:04:24 - PredictorApp - INFO - Realizando previsões (SVC) para 68 jogos...
2025-05-08 22:04:24 - PredictorApp - INFO -   Aplicando scaler...
2025-05-08 22:04:24 - PredictorApp - INFO -   Calculando probs brutas...
2025-05-08 22:04:24 - PredictorApp - INFO -   Aplicando calibrador (LogisticRegression) na coluna 'ProbRaw_Empate'...
2025-05-08 22:04:24 - PredictorApp - INFO -   -> Coluna 'Prob_Empate' (Calibrada) preenchida.
2025-05-08 22:04:24 - PredictorApp - INFO -   Calculando EV usando probs Calibrada...
2025-05-08 22:04:24 - PredictorApp - INFO -   -> EV_Empate calculado para 68 jogos.
2025-05-08 22:04:24 - PredictorApp - INFO - Previsões (com EV e probs Raw/Calib) geradas.
2025-05-08 22:06:29 - ModelInterpreterApp - INFO - [GUI Interpreter] Carregando modelos e dados p/ análise...
2025-05-08 22:06:29 - ModelInterpreterApp - INFO - [GUI Interpreter] Dados ((17938, 63)) obtidos. ID: ((17938, 63), ('Goals_A_FT', 'Shots_H', 'ShotsOnTarget_H', 'Odd_D_FT', 'Odd_H_FT', 'Corners_H_FT', 'Odd_BTTS_No', 'Odd_BTTS_Yes', 'Odd_A_FT', 'Odd_Under25_FT', 'Goals_H_FT', 'Shots_A', 'ShotsOnTarget_A', 'Odd_Over25_FT', 'Corners_A_FT', 'PiRating_H', 'PiRating_A', 'PiRating_Diff', 'PiRating_Prob_H', 'PiR_Mom_5G_H', 'PiR_Mom_5G_A', 'PiR_Mom_5G_Diff', 'Ptos_H', 'Ptos_A', 'IsDraw', 'p_H', 'p_D', 'p_A', 'VG_H_raw', 'VG_A_raw', 'CG_H_raw', 'CG_A_raw', 'p_H_norm', 'p_D_norm', 'p_A_norm', 'abs_ProbDiff_Norm', 'Media_VG_H', 'Media_VG_A', 'Media_CG_H', 'Media_CG_A', 'Std_CG_H', 'Std_CG_A', 'Avg_Gols_Marcados_H', 'Avg_Gols_Sofridos_H', 'FA_H', 'FD_H', 'Avg_Gols_Marcados_A', 'Avg_Gols_Sofridos_A', 'FA_A', 'FD_A', 'Prob_Empate_Poisson', 'Odd_D_Cat', 'CV_HDA', 'Diff_Media_CG', 'pDnorm_x_CVHDA', 'pDnorm_div_CVHDA', 'pDnorm_x_PiRDiffAbs', 'pDnorm_div_PiRDiffAbs', 'OddD_x_PiRDiffAbs', 'OddD_div_PiRDiffAbs', 'PiRProbH_x_OddH', 'AvgGolsMarc_Diff', 'AvgGolsSofr_Diff'))
2025-05-08 22:06:29 - ModelInterpreterApp - INFO - [GUI Interpreter]  -> Carregando Melhor F1 (Empate)...
2025-05-08 22:06:29 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_f1.joblib (Modif.: 2025-05-08 21:42:01)
2025-05-08 22:06:29 - PredictorApp - INFO -   Tipo: SVC | Calib: LogisticRegression | F1 Thr: 0.2529 | EV Thr: 0.1700
2025-05-08 22:06:29 - ModelInterpreterApp - INFO - [GUI Interpreter]     -> Aplicando scaler Melhor F1 (Empate)...
2025-05-08 22:06:29 - ModelInterpreterApp - WARNING - Tentando Permutation Importance SVC...
2025-05-08 22:09:00 - ModelInterpreterApp - INFO -  -> Permutation Importance OK.
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter]     -> Modelo Melhor F1 (Empate) e dados prep OK.
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter]     -> Cache SHAP não encontrado.
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter]  -> Carregando Melhor ROI (Empate)...
2025-05-08 22:09:00 - PredictorApp - INFO - Modelo carregado: best_model_backdraw_best_roi.joblib (Modif.: 2025-05-08 21:42:01)
2025-05-08 22:09:00 - PredictorApp - INFO -   Tipo: GaussianNB | Calib: LogisticRegression | F1 Thr: 0.2314 | EV Thr: 0.1900
2025-05-08 22:09:00 - ModelInterpreterApp - WARNING - Tentando Permutation Importance GaussianNB...
2025-05-08 22:09:00 - ModelInterpreterApp - ERROR - Erro Permutation Importance: Input X contains NaN.
GaussianNB does not accept missing values encoded as NaN natively. For supervised learning, you might want to consider sklearn.ensemble.HistGradientBoostingClassifier and Regressor which accept missing values encoded as NaNs natively. Alternatively, it is possible to preprocess the data, for instance by using an imputer transformer in a pipeline or drop samples with missing values. See https://scikit-learn.org/stable/modules/impute.html You can find a list of all estimators that handle NaN values at the following page: https://scikit-learn.org/stable/modules/impute.html#estimators-that-handle-nan-values
Traceback (most recent call last):
  File "c:\Users\princ\Desktop\modelagem\Modelagem_Exemplos\futebol_analytics\src\model_interpreter_tab.py", line 254, in _calculate_feature_importance
    try: result = permutation_importance(model, X_prepared_for_model, y_aligned, n_repeats=5, random_state=RANDOM_STATE, n_jobs=-1, scoring='accuracy'); importances = result.importances_mean; logger.info(" -> Permutation Importance OK.")
                  ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\_param_validation.py", line 216, in wrapper
    return func(*args, **kwargs)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\inspection\_permutation_importance.py", line 285, in permutation_importance
    baseline_score = _weights_scorer(scorer, estimator, X, y, sample_weight)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\inspection\_permutation_importance.py", line 28, in _weights_scorer
    return scorer(estimator, X, y)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\metrics\_scorer.py", line 288, in __call__
    return self._score(partial(_cached_call, None), estimator, X, y_true, **_kwargs)
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\metrics\_scorer.py", line 380, in _score
    y_pred = method_caller(
        estimator,
    ...<2 lines>...
        pos_label=pos_label,
    )
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\metrics\_scorer.py", line 90, in _cached_call
    result, _ = _get_response_values(
                ~~~~~~~~~~~~~~~~~~~~^
        estimator, *args, response_method=response_method, **kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\_response.py", line 214, in _get_response_values
    y_pred = prediction_method(X)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\naive_bayes.py", line 105, in predict
    X = self._check_X(X)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\naive_bayes.py", line 272, in _check_X
    return validate_data(self, X, reset=False)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 2944, in validate_data
    out = check_array(X, input_name="X", **check_params)
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 1107, in check_array
    _assert_all_finite(
    ~~~~~~~~~~~~~~~~~~^
        array,
        ^^^^^^
    ...<2 lines>...
        allow_nan=ensure_all_finite == "allow-nan",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 120, in _assert_all_finite
    _assert_all_finite_element_wise(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        X,
        ^^
    ...<4 lines>...
        input_name=input_name,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\princ\AppData\Local\Programs\Python\Python313\Lib\site-packages\sklearn\utils\validation.py", line 169, in _assert_all_finite_element_wise
    raise ValueError(msg_err)
ValueError: Input X contains NaN.
GaussianNB does not accept missing values encoded as NaN natively. For supervised learning, you might want to consider sklearn.ensemble.HistGradientBoostingClassifier and Regressor which accept missing values encoded as NaNs natively. Alternatively, it is possible to preprocess the data, for instance by using an imputer transformer in a pipeline or drop samples with missing values. See https://scikit-learn.org/stable/modules/impute.html You can find a list of all estimators that handle NaN values at the following page: https://scikit-learn.org/stable/modules/impute.html#estimators-that-handle-nan-values
2025-05-08 22:09:00 - ModelInterpreterApp - WARNING - Não calculou importância Melhor ROI (Empate).
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter]     -> Modelo Melhor ROI (Empate) e dados prep OK.
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter]     -> Cache SHAP não encontrado.
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter] Modelos carregados: Melhor F1 (Empate), Melhor ROI (Empate)
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter] Atualizando análise para: Melhor F1 (Empate)
2025-05-08 22:09:00 - ModelInterpreterApp - INFO - [GUI Interpreter] Iniciando SHAP SVC background...
2025-05-08 22:09:23 - ModelInterpreterApp - INFO - [GUI Interpreter] Cache SHAP salvo disco Melhor F1 (Empate).
2025-05-08 22:11:17 - ModelInterpreterApp - INFO - Cache SHAP memória Melhor F1 (Empate) OK.
2025-05-08 22:11:18 - ModelInterpreterApp - INFO - [GUI Interpreter] Gerando gráfico SHAP para Melhor F1 (Empate) (salvando imagem, suprimindo tight)...
2025-05-08 22:11:18 - ModelInterpreterApp - INFO - [GUI Interpreter] Gráfico SHAP exibido como imagem para Melhor F1 (Empate).
2025-05-08 22:38:40 - MainApp - INFO - Fechando aplicação.
2025-05-08 22:38:40 - MainApp - INFO - Destruindo janela principal.
